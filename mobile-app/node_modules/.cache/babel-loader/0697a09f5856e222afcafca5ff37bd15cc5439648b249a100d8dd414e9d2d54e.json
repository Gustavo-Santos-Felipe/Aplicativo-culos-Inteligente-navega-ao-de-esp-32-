{"ast":null,"code":"var _jsxFileName = \"C:\\\\esp32-navigation-app\\\\mobile-app\\\\src\\\\App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { GoogleMap, useJsApiLoader, Marker, Autocomplete, DirectionsRenderer } from '@react-google-maps/api';\nimport { useSounds } from './hooks/useSounds';\nimport { useOffline } from './hooks/useOffline';\nimport { SoundControls } from './components/SoundControls';\n\n// Definições de tipos para Web Bluetooth API\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// ##################################################################\n// # COLOQUE SUAS CHAVES AQUI                                       #\n// ##################################################################\n\n// 1. CHAVE DA API GOOGLE MAPS PLATFORM\n//    Ative as APIs: \"Maps JavaScript API\", \"Directions API\", \"Places API\"\n//    Instruções: https://developers.google.com/maps/gmp-get-started\nconst GOOGLE_MAPS_API_KEY = \"AIzaSyAVEzH5bvFPDpgjQtnA4s2TKfjEW_0OTLY\";\n\n// 2. CONFIGURAÇÕES BLUETOOTH\n//    Nome do dispositivo ESP32 que aparecerá na lista de dispositivos Bluetooth\nconst ESP32_DEVICE_NAME = \"ESP32_Navigation\"; // Altere para o nome do seu ESP32\nconst ESP32_SERVICE_UUID = \"0000ffe0-0000-1000-8000-00805f9b34fb\"; // UUID do serviço\nconst ESP32_CHARACTERISTIC_UUID = \"0000ffe1-0000-1000-8000-00805f9b34fb\"; // UUID da característica\n\n// ##################################################################\n\n// Interface para a estrutura da rota salva\n\n// Interface para dispositivo Bluetooth\n\n// Estados da aplicação\n\nconst containerStyle = {\n  width: '100%',\n  height: '100%'\n};\n\n// Adicionando uma constante para a distância de gatilho\nconst NAVIGATION_TRIGGER_DISTANCE_METERS = 50; // Dispara o envio da instrução a 50 metros\n\nconst libraries = [\"places\"];\nfunction App() {\n  _s();\n  const {\n    isLoaded\n  } = useJsApiLoader({\n    id: 'google-map-script',\n    googleMapsApiKey: GOOGLE_MAPS_API_KEY,\n    libraries\n  });\n\n  // Estados da aplicação\n  const [appState, setAppState] = useState('loading');\n  const [introStep, setIntroStep] = useState(0);\n  const [showLocationRequest, setShowLocationRequest] = useState(false);\n  const [map, setMap] = useState(null);\n  const [directionsResponse, setDirectionsResponse] = useState(null);\n  const [currentPosition, setCurrentPosition] = useState(null);\n  const [simplifiedInstructions, setSimplifiedInstructions] = useState([]);\n\n  // Novos estados para gerenciar a navegação e rotas salvas\n  const [isNavigating, setIsNavigating] = useState(false);\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\n  const [savedRoutes, setSavedRoutes] = useState([]);\n  const locationWatcherId = useRef(null);\n\n  // Estados para Bluetooth\n  const [isBluetoothConnected, setIsBluetoothConnected] = useState(false);\n  const [bluetoothDevice, setBluetoothDevice] = useState(null);\n  const [bluetoothCharacteristic, setBluetoothCharacteristic] = useState(null);\n  const [isConnectingBluetooth, setIsConnectingBluetooth] = useState(false);\n  const destinationRef = useRef(null);\n\n  // Sistema de sons\n  const {\n    playSound,\n    playHoverSound,\n    preloadSounds\n  } = useSounds();\n\n  // Animação de entrada\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setAppState('intro');\n    }, 2000);\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Sequência de animação do intro\n  useEffect(() => {\n    if (appState === 'intro') {\n      const timer = setTimeout(() => {\n        setIntroStep(1);\n      }, 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [appState]);\n  useEffect(() => {\n    if (introStep === 1) {\n      const timer = setTimeout(() => {\n        setIntroStep(2);\n      }, 1500);\n      return () => clearTimeout(timer);\n    }\n  }, [introStep]);\n  useEffect(() => {\n    if (introStep === 2) {\n      const timer = setTimeout(() => {\n        setShowLocationRequest(true);\n      }, 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [introStep]);\n\n  // Sistema offline\n  const {\n    isOnline: isOnlineStatus,\n    registerServiceWorker,\n    saveOfflineData,\n    getOfflineData,\n    sendNotification\n  } = useOffline();\n\n  // Novo estado para o modo offline (usando hook offline)\n  const [isOnline, setIsOnline] = useState(isOnlineStatus);\n\n  // Verificar se o navegador suporta Web Bluetooth\n  const isBluetoothSupported = () => {\n    return 'bluetooth' in navigator;\n  };\n\n  // Função para conectar ao ESP32 via Bluetooth\n  const connectToESP32 = async () => {\n    playSound('click');\n    if (!isBluetoothSupported() || !navigator.bluetooth) {\n      alert(\"Seu navegador não suporta Web Bluetooth. Use Chrome ou Edge.\");\n      playSound('error');\n      return;\n    }\n    setIsConnectingBluetooth(true);\n    try {\n      var _device$gatt;\n      // Solicitar dispositivo Bluetooth\n      const device = await navigator.bluetooth.requestDevice({\n        filters: [{\n          name: ESP32_DEVICE_NAME\n        }, {\n          namePrefix: \"ESP32\"\n        }],\n        optionalServices: [ESP32_SERVICE_UUID]\n      });\n      console.log(\"Dispositivo selecionado:\", device.name);\n\n      // Conectar ao GATT Server\n      const server = await ((_device$gatt = device.gatt) === null || _device$gatt === void 0 ? void 0 : _device$gatt.connect());\n      if (!server) {\n        throw new Error(\"Não foi possível conectar ao servidor GATT\");\n      }\n\n      // Obter o serviço\n      const service = await server.getPrimaryService(ESP32_SERVICE_UUID);\n\n      // Obter a característica para escrita\n      const characteristic = await service.getCharacteristic(ESP32_CHARACTERISTIC_UUID);\n\n      // Habilitar notificações se disponível\n      try {\n        await characteristic.startNotifications();\n        characteristic.addEventListener('characteristicvaluechanged', event => {\n          const target = event.target;\n          const value = target.value;\n          if (value) {\n            const decoder = new TextDecoder();\n            const message = decoder.decode(value);\n            console.log(\"Mensagem recebida do ESP32:\", message);\n          }\n        });\n      } catch (error) {\n        console.log(\"Notificações não disponíveis, apenas escrita\");\n      }\n      setBluetoothDevice({\n        id: device.id,\n        name: device.name || ESP32_DEVICE_NAME,\n        gatt: server\n      });\n      setBluetoothCharacteristic(characteristic);\n      setIsBluetoothConnected(true);\n      console.log(\"Conectado ao ESP32 via Bluetooth!\");\n      alert(\"Conectado ao ESP32 via Bluetooth!\");\n      playSound('connect');\n    } catch (error) {\n      console.error(\"Erro ao conectar Bluetooth:\", error);\n      if (error instanceof Error) {\n        if (error.name === 'NotFoundError') {\n          alert(\"ESP32 não encontrado. Verifique se está ligado e visível.\");\n        } else if (error.name === 'NotAllowedError') {\n          alert(\"Permissão negada para Bluetooth.\");\n        } else {\n          alert(`Erro de conexão: ${error.message}`);\n        }\n      } else {\n        alert(\"Erro desconhecido ao conectar Bluetooth.\");\n        playSound('error');\n      }\n    } finally {\n      setIsConnectingBluetooth(false);\n    }\n  };\n\n  // Função para desconectar Bluetooth\n  const disconnectBluetooth = async () => {\n    var _bluetoothDevice$gatt;\n    playSound('click');\n    if (bluetoothDevice !== null && bluetoothDevice !== void 0 && (_bluetoothDevice$gatt = bluetoothDevice.gatt) !== null && _bluetoothDevice$gatt !== void 0 && _bluetoothDevice$gatt.connected) {\n      await bluetoothDevice.gatt.disconnect();\n    }\n    setBluetoothDevice(null);\n    setBluetoothCharacteristic(null);\n    setIsBluetoothConnected(false);\n    console.log(\"Desconectado do ESP32\");\n    playSound('disconnect');\n  };\n\n  // Função para enviar instrução via Bluetooth\n  const sendInstructionViaBluetooth = useCallback(async instruction => {\n    if (!bluetoothCharacteristic || !isBluetoothConnected) {\n      console.error(\"Bluetooth não conectado\");\n      return;\n    }\n    try {\n      const encoder = new TextEncoder();\n      const data = encoder.encode(instruction + '\\n'); // Adiciona quebra de linha\n\n      await bluetoothCharacteristic.writeValue(data);\n      console.log(`Instrução enviada via Bluetooth: ${instruction}`);\n    } catch (error) {\n      console.error(\"Erro ao enviar via Bluetooth:\", error);\n      alert(\"Erro ao enviar instrução via Bluetooth. Verifique a conexão.\");\n    }\n  }, [bluetoothCharacteristic, isBluetoothConnected]);\n\n  // Função para enviar instrução (agora usa Bluetooth em vez de HTTP)\n  const sendSingleInstructionToESP32 = useCallback(async instruction => {\n    if (isBluetoothConnected) {\n      await sendInstructionViaBluetooth(instruction);\n    } else {\n      console.log(\"Bluetooth não conectado. Instrução não enviada.\");\n      alert(\"Conecte ao ESP32 via Bluetooth primeiro.\");\n    }\n  }, [isBluetoothConnected, sendInstructionViaBluetooth]);\n\n  // Solicitar localização\n  const requestLocation = () => {\n    playSound('click');\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        const pos = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n        setCurrentPosition(pos);\n        setShowLocationRequest(false);\n        setAppState('main');\n        playSound('success');\n      }, () => {\n        alert(\"Erro: O serviço de geolocalização falhou.\");\n        playSound('error');\n      });\n    } else {\n      alert(\"Erro: Seu navegador não suporta geolocalização.\");\n      playSound('error');\n    }\n  };\n\n  // Efeito para monitorar o status da conexão (online/offline)\n  useEffect(() => {\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n\n  // Efeito para carregar as rotas salvas do localStorage ao iniciar\n  useEffect(() => {\n    try {\n      const routesFromStorage = localStorage.getItem('savedNavigationRoutes');\n      if (routesFromStorage) {\n        setSavedRoutes(JSON.parse(routesFromStorage));\n      }\n    } catch (error) {\n      console.error(\"Erro ao carregar rotas do localStorage:\", error);\n    }\n  }, []);\n\n  // Pré-carregar sons quando a aplicação inicia\n  useEffect(() => {\n    preloadSounds();\n  }, [preloadSounds]);\n\n  // Registrar service worker para funcionalidade offline\n  useEffect(() => {\n    registerServiceWorker();\n  }, [registerServiceWorker]);\n\n  // Nova função para calcular a distância entre dois pontos de GPS (fórmula de Haversine)\n  const getDistanceInMeters = useCallback((pos1, pos2) => {\n    const R = 6371e3; // Metros\n    const p1 = pos1.lat * Math.PI / 180;\n    const p2 = pos2.lat * Math.PI / 180;\n    const deltaP = (pos2.lat - pos1.lat) * Math.PI / 180;\n    const deltaL = (pos2.lng - pos1.lng) * Math.PI / 180;\n    const a = Math.sin(deltaP / 2) * Math.sin(deltaP / 2) + Math.cos(p1) * Math.cos(p2) * Math.sin(deltaL / 2) * Math.sin(deltaL / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c; // em metros\n  }, []);\n  const calculateRoute = async () => {\n    var _destinationRef$curre;\n    playSound('click');\n    if (!isOnline) {\n      alert(\"Funcionalidade indisponível offline. Carregue uma rota salva.\");\n      playSound('error');\n      return;\n    }\n    if (!((_destinationRef$curre = destinationRef.current) !== null && _destinationRef$curre !== void 0 && _destinationRef$curre.value) || !currentPosition) {\n      playSound('error');\n      return;\n    }\n    const directionsService = new google.maps.DirectionsService();\n    const results = await directionsService.route({\n      origin: currentPosition,\n      destination: destinationRef.current.value,\n      travelMode: google.maps.TravelMode.DRIVING,\n      language: 'pt-BR' // Instruções em Português\n    });\n    setDirectionsResponse(results);\n    generateSimplifiedInstructions(results);\n    playSound('success');\n  };\n  const generateSimplifiedInstructions = directions => {\n    if (!directions.routes || directions.routes.length === 0) {\n      return;\n    }\n    const route = directions.routes[0].legs[0];\n    const instructions = route.steps.map(step => {\n      var _step$distance;\n      // Remove tags HTML da instrução (ex: <b>, <div>)\n      const cleanInstruction = step.instructions.replace(/<[^>]*>/g, '');\n      const distance = ((_step$distance = step.distance) === null || _step$distance === void 0 ? void 0 : _step$distance.text) || '';\n      return `${cleanInstruction} (${distance})`;\n    });\n    setSimplifiedInstructions(instructions);\n  };\n\n  // Funções para gerenciar rotas salvas\n  const saveCurrentRoute = () => {\n    var _destinationRef$curre2;\n    if (!isOnline) {\n      alert(\"Funcionalidade indisponível offline.\");\n      return;\n    }\n    if (!directionsResponse || !((_destinationRef$curre2 = destinationRef.current) !== null && _destinationRef$curre2 !== void 0 && _destinationRef$curre2.value)) {\n      alert(\"Nenhuma rota calculada para salvar.\");\n      return;\n    }\n    const routeName = destinationRef.current.value;\n    if (savedRoutes.some(route => route.name === routeName)) {\n      if (!window.confirm(`Uma rota para \"${routeName}\" já existe. Deseja substituí-la?`)) {\n        return;\n      }\n    }\n    const newRoute = {\n      name: routeName,\n      directions: directionsResponse\n    };\n    const updatedRoutes = savedRoutes.filter(route => route.name !== routeName);\n    updatedRoutes.push(newRoute);\n    setSavedRoutes(updatedRoutes);\n    localStorage.setItem('savedNavigationRoutes', JSON.stringify(updatedRoutes));\n    alert(`Rota para \"${routeName}\" salva com sucesso!`);\n  };\n  const loadSavedRoute = routeToLoad => {\n    setDirectionsResponse(routeToLoad.directions);\n    generateSimplifiedInstructions(routeToLoad.directions);\n    setIsNavigating(false);\n    if (destinationRef.current) {\n      destinationRef.current.value = routeToLoad.name;\n    }\n    alert(`Rota para \"${routeToLoad.name}\" carregada.`);\n  };\n  const deleteSavedRoute = indexToDelete => {\n    if (window.confirm(\"Tem certeza que deseja deletar esta rota?\")) {\n      const updatedRoutes = savedRoutes.filter((_, index) => index !== indexToDelete);\n      setSavedRoutes(updatedRoutes);\n      localStorage.setItem('savedNavigationRoutes', JSON.stringify(updatedRoutes));\n    }\n  };\n  const stopNavigation = () => {\n    playSound('click');\n    if (locationWatcherId.current !== null) {\n      navigator.geolocation.clearWatch(locationWatcherId.current);\n      locationWatcherId.current = null;\n    }\n    setIsNavigating(false);\n    alert(\"Navegação encerrada.\");\n    playSound('notification');\n  };\n  const advanceToStep = useCallback(stepIndex => {\n    if (!directionsResponse) return;\n    const route = directionsResponse.routes[0].legs[0];\n    if (stepIndex >= route.steps.length) {\n      sendSingleInstructionToESP32(\"Você chegou ao seu destino!\");\n      stopNavigation();\n      playSound('success');\n      return;\n    }\n    const step = route.steps[stepIndex];\n    const instructionText = step.instructions.replace(/<[^>]*>/g, '');\n    sendSingleInstructionToESP32(instructionText);\n    setCurrentStepIndex(prevIndex => prevIndex + 1);\n    playSound('instruction');\n  }, [directionsResponse, sendSingleInstructionToESP32]);\n  const handleLocationUpdate = useCallback(position => {\n    if (!(directionsResponse !== null && directionsResponse !== void 0 && directionsResponse.routes[0])) return;\n    const userPosition = {\n      lat: position.coords.latitude,\n      lng: position.coords.longitude\n    };\n    setCurrentPosition(userPosition);\n    const route = directionsResponse.routes[0].legs[0];\n    if (currentStepIndex >= route.steps.length) {\n      advanceToStep(currentStepIndex); // Para enviar a mensagem final\n      return;\n    }\n    const nextStep = route.steps[currentStepIndex];\n    let nextStepLocation;\n    const startLocation = nextStep.start_location;\n    if (typeof startLocation.lat === 'function') {\n      nextStepLocation = {\n        lat: startLocation.lat(),\n        lng: startLocation.lng()\n      };\n    } else {\n      nextStepLocation = startLocation;\n    }\n    const distance = getDistanceInMeters(userPosition, nextStepLocation);\n    if (distance < NAVIGATION_TRIGGER_DISTANCE_METERS) {\n      advanceToStep(currentStepIndex);\n    }\n  }, [directionsResponse, currentStepIndex, advanceToStep, getDistanceInMeters]);\n  const handleLocationError = useCallback(error => {\n    alert(`Erro de geolocalização: ${error.message}`);\n    stopNavigation();\n  }, []);\n\n  // Este useEffect é o cérebro da navegação em tempo real\n  useEffect(() => {\n    if (!isNavigating) {\n      return;\n    }\n    locationWatcherId.current = navigator.geolocation.watchPosition(handleLocationUpdate, handleLocationError, {\n      enableHighAccuracy: true,\n      timeout: 10000,\n      maximumAge: 0\n    });\n    return () => {\n      if (locationWatcherId.current !== null) {\n        navigator.geolocation.clearWatch(locationWatcherId.current);\n      }\n    };\n  }, [isNavigating, handleLocationUpdate, handleLocationError]);\n  const startNavigation = () => {\n    playSound('click');\n    if (!directionsResponse) {\n      alert(\"Carregue uma rota primeiro.\");\n      playSound('error');\n      return;\n    }\n    stopNavigation(); // Garante que qualquer watch anterior seja limpo\n    setCurrentStepIndex(0);\n    setIsNavigating(true);\n    alert(\"Iniciando a navegação!\");\n    playSound('navigation');\n  };\n  const forceNextInstruction = () => {\n    if (!isNavigating) {\n      alert(\"A navegação não está ativa.\");\n      return;\n    }\n    advanceToStep(currentStepIndex);\n  };\n  if (!isLoaded) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading-screen\",\n    children: \"Carregando...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 579,\n    columnNumber: 25\n  }, this);\n\n  // Tela de carregamento\n  if (appState === 'loading') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-logo\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/assets/glasses-logo.png\",\n          alt: \"Castrilha\",\n          className: \"glasses-image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-text\",\n        children: \"Castrilha\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 588,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 584,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Tela de introdução\n  if (appState === 'intro') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"intro-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `intro-logo ${introStep >= 1 ? 'animate' : ''}`,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/assets/glasses-logo.png\",\n          alt: \"Castrilha\",\n          className: \"glasses-image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 598,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `intro-title ${introStep >= 2 ? 'animate' : ''}`,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/assets/nomepx.png\",\n          alt: \"Castrilha\",\n          className: \"title-image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 9\n      }, this), showLocationRequest && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"location-request\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Permitir acesso \\xE0 localiza\\xE7\\xE3o?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Precisamos da sua localiza\\xE7\\xE3o para fornecer navega\\xE7\\xE3o precisa.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary\",\n          onClick: requestLocation,\n          children: \"Permitir Localiza\\xE7\\xE3o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 596,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Tela principal\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/assets/glasses-logo-small.png\",\n            alt: \"Castrilha\",\n            className: \"glasses-logo-image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"app-title\",\n            children: \"Castrilha\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SoundControls, {\n          className: \"header-sound-controls\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 620,\n        columnNumber: 9\n      }, this), !isOnline && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"offline-banner\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"MODO OFFLINE ATIVO\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 629,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bluetooth-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDD35 Conex\\xE3o Bluetooth\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bluetooth-status\",\n          children: isBluetoothConnected ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"connected-status\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"status-indicator connected\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Conectado: \", bluetoothDevice === null || bluetoothDevice === void 0 ? void 0 : bluetoothDevice.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button disconnect-btn\",\n              onClick: disconnectBluetooth,\n              children: \"Desconectar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 641,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"disconnected-status\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"status-indicator disconnected\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 650,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Desconectado\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button connect-btn\",\n              onClick: connectToESP32,\n              disabled: isConnectingBluetooth,\n              children: isConnectingBluetooth ? 'Conectando...' : 'Conectar ESP32'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 652,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 649,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 11\n        }, this), !isBluetoothSupported() && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bluetooth-warning\",\n          children: \"\\u26A0\\uFE0F Seu navegador n\\xE3o suporta Web Bluetooth. Use Chrome ou Edge.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 634,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"controls-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Navega\\xE7\\xE3o Ponto a Ponto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 670,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group\",\n          children: /*#__PURE__*/_jsxDEV(Autocomplete, {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Destino\",\n              ref: destinationRef,\n              disabled: !isOnline\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 672,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button\",\n            onClick: calculateRoute,\n            disabled: !isOnline,\n            children: \"Obter Rota\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button\",\n            onClick: saveCurrentRoute,\n            disabled: !isOnline,\n            children: \"Salvar Rota Atual\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 681,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navigation-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Controle de Navega\\xE7\\xE3o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 700,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button-group\",\n          children: [!isNavigating ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: startNavigation,\n            className: \"button start-nav-btn\",\n            disabled: !directionsResponse,\n            children: \"Iniciar Navega\\xE7\\xE3o\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 703,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: stopNavigation,\n            className: \"button stop-nav-btn\",\n            children: \"Parar Navega\\xE7\\xE3o\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 707,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: forceNextInstruction,\n            className: \"button\",\n            disabled: !isNavigating,\n            children: \"Pr\\xF3xima Instru\\xE7\\xE3o (Teste)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 711,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 701,\n          columnNumber: 11\n        }, this), isNavigating && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"nav-status\",\n          children: [\"Navega\\xE7\\xE3o em curso... Pr\\xF3ximo passo: \", currentStepIndex + 1]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 699,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"saved-routes-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Rotas Salvas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 721,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"route-list\",\n          children: savedRoutes.length > 0 ? savedRoutes.map((route, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"route-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: route.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 726,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"route-item-buttons\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => loadSavedRoute(route),\n                children: \"Carregar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => deleteSavedRoute(index),\n                className: \"delete-btn\",\n                children: \"X\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 729,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 727,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 725,\n            columnNumber: 17\n          }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Nenhuma rota salva.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 734,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 722,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 720,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"instructions-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Instru\\xE7\\xF5es\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 740,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"instructions-list\",\n          children: simplifiedInstructions.map((inst, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: index === currentStepIndex - 1 ? 'current-instruction' : '',\n            children: inst\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 743,\n            columnNumber: 21\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 741,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 739,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 619,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-container\",\n      children: isOnline ? /*#__PURE__*/_jsxDEV(GoogleMap, {\n        mapContainerStyle: containerStyle,\n        center: currentPosition || {\n          lat: -23.55052,\n          lng: -46.633308\n        },\n        zoom: 15,\n        onLoad: setMap,\n        options: {\n          mapTypeControl: false,\n          streetViewControl: false,\n          fullscreenControl: false\n        },\n        children: [directionsResponse && /*#__PURE__*/_jsxDEV(DirectionsRenderer, {\n          directions: directionsResponse\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 764,\n          columnNumber: 36\n        }, this), currentPosition && /*#__PURE__*/_jsxDEV(Marker, {\n          position: currentPosition\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 765,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 753,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"offline-map-placeholder\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Mapa indispon\\xEDvel em modo offline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 769,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Use as rotas salvas para navegar. A sua localiza\\xE7\\xE3o continua sendo rastreada.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 770,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 768,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 751,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 618,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"yRnujC29k7jakqu0YWBQKzk/Sqk=\", false, function () {\n  return [useJsApiLoader, useSounds, useOffline];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","GoogleMap","useJsApiLoader","Marker","Autocomplete","DirectionsRenderer","useSounds","useOffline","SoundControls","jsxDEV","_jsxDEV","GOOGLE_MAPS_API_KEY","ESP32_DEVICE_NAME","ESP32_SERVICE_UUID","ESP32_CHARACTERISTIC_UUID","containerStyle","width","height","NAVIGATION_TRIGGER_DISTANCE_METERS","libraries","App","_s","isLoaded","id","googleMapsApiKey","appState","setAppState","introStep","setIntroStep","showLocationRequest","setShowLocationRequest","map","setMap","directionsResponse","setDirectionsResponse","currentPosition","setCurrentPosition","simplifiedInstructions","setSimplifiedInstructions","isNavigating","setIsNavigating","currentStepIndex","setCurrentStepIndex","savedRoutes","setSavedRoutes","locationWatcherId","isBluetoothConnected","setIsBluetoothConnected","bluetoothDevice","setBluetoothDevice","bluetoothCharacteristic","setBluetoothCharacteristic","isConnectingBluetooth","setIsConnectingBluetooth","destinationRef","playSound","playHoverSound","preloadSounds","timer","setTimeout","clearTimeout","isOnline","isOnlineStatus","registerServiceWorker","saveOfflineData","getOfflineData","sendNotification","setIsOnline","isBluetoothSupported","navigator","connectToESP32","bluetooth","alert","_device$gatt","device","requestDevice","filters","name","namePrefix","optionalServices","console","log","server","gatt","connect","Error","service","getPrimaryService","characteristic","getCharacteristic","startNotifications","addEventListener","event","target","value","decoder","TextDecoder","message","decode","error","disconnectBluetooth","_bluetoothDevice$gatt","connected","disconnect","sendInstructionViaBluetooth","instruction","encoder","TextEncoder","data","encode","writeValue","sendSingleInstructionToESP32","requestLocation","geolocation","getCurrentPosition","position","pos","lat","coords","latitude","lng","longitude","handleOnline","handleOffline","window","removeEventListener","routesFromStorage","localStorage","getItem","JSON","parse","getDistanceInMeters","pos1","pos2","R","p1","Math","PI","p2","deltaP","deltaL","a","sin","cos","c","atan2","sqrt","calculateRoute","_destinationRef$curre","current","directionsService","google","maps","DirectionsService","results","route","origin","destination","travelMode","TravelMode","DRIVING","language","generateSimplifiedInstructions","directions","routes","length","legs","instructions","steps","step","_step$distance","cleanInstruction","replace","distance","text","saveCurrentRoute","_destinationRef$curre2","routeName","some","confirm","newRoute","updatedRoutes","filter","push","setItem","stringify","loadSavedRoute","routeToLoad","deleteSavedRoute","indexToDelete","_","index","stopNavigation","clearWatch","advanceToStep","stepIndex","instructionText","prevIndex","handleLocationUpdate","userPosition","nextStep","nextStepLocation","startLocation","start_location","handleLocationError","watchPosition","enableHighAccuracy","timeout","maximumAge","startNavigation","forceNextInstruction","className","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","onClick","disabled","type","placeholder","ref","inst","mapContainerStyle","center","zoom","onLoad","options","mapTypeControl","streetViewControl","fullscreenControl","_c","$RefreshReg$"],"sources":["C:/esp32-navigation-app/mobile-app/src/App.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { GoogleMap, useJsApiLoader, Marker, Autocomplete, DirectionsRenderer } from '@react-google-maps/api';\nimport { useSounds } from './hooks/useSounds';\nimport { useOffline } from './hooks/useOffline';\nimport { SoundControls } from './components/SoundControls';\nimport { OfflineStatus } from './components/OfflineStatus';\n\n// Definições de tipos para Web Bluetooth API\ndeclare global {\n  interface Navigator {\n    bluetooth?: Bluetooth;\n  }\n  \n  interface Bluetooth {\n    requestDevice(options: RequestDeviceOptions): Promise<BluetoothDevice>;\n  }\n  \n  interface RequestDeviceOptions {\n    filters?: BluetoothLEScanFilter[];\n    optionalServices?: string[];\n  }\n  \n  interface BluetoothLEScanFilter {\n    name?: string;\n    namePrefix?: string;\n    services?: string[];\n  }\n  \n  interface BluetoothDevice {\n    id: string;\n    name?: string;\n    gatt?: BluetoothRemoteGATTServer;\n  }\n  \n  interface BluetoothRemoteGATTServer {\n    connect(): Promise<BluetoothRemoteGATTServer>;\n    getPrimaryService(service: string): Promise<BluetoothRemoteGATTService>;\n    connected: boolean;\n    disconnect(): void;\n  }\n  \n  interface BluetoothRemoteGATTService {\n    getCharacteristic(characteristic: string): Promise<BluetoothRemoteGATTCharacteristic>;\n  }\n  \n  interface BluetoothRemoteGATTCharacteristic {\n    writeValue(value: BufferSource): Promise<void>;\n    startNotifications(): Promise<BluetoothRemoteGATTCharacteristic>;\n    addEventListener(type: string, listener: EventListener): void;\n    value?: DataView;\n  }\n}\n\n// ##################################################################\n// # COLOQUE SUAS CHAVES AQUI                                       #\n// ##################################################################\n\n// 1. CHAVE DA API GOOGLE MAPS PLATFORM\n//    Ative as APIs: \"Maps JavaScript API\", \"Directions API\", \"Places API\"\n//    Instruções: https://developers.google.com/maps/gmp-get-started\nconst GOOGLE_MAPS_API_KEY = \"AIzaSyAVEzH5bvFPDpgjQtnA4s2TKfjEW_0OTLY\";\n\n// 2. CONFIGURAÇÕES BLUETOOTH\n//    Nome do dispositivo ESP32 que aparecerá na lista de dispositivos Bluetooth\nconst ESP32_DEVICE_NAME = \"ESP32_Navigation\"; // Altere para o nome do seu ESP32\nconst ESP32_SERVICE_UUID = \"0000ffe0-0000-1000-8000-00805f9b34fb\"; // UUID do serviço\nconst ESP32_CHARACTERISTIC_UUID = \"0000ffe1-0000-1000-8000-00805f9b34fb\"; // UUID da característica\n\n// ##################################################################\n\n// Interface para a estrutura da rota salva\ninterface SavedRoute {\n  name: string;\n  directions: google.maps.DirectionsResult;\n}\n\n// Interface para dispositivo Bluetooth\ninterface BluetoothDevice {\n  id: string;\n  name: string;\n  gatt?: BluetoothRemoteGATTServer;\n}\n\n// Estados da aplicação\ntype AppState = 'loading' | 'intro' | 'main';\n\nconst containerStyle = {\n  width: '100%',\n  height: '100%'\n};\n\n// Adicionando uma constante para a distância de gatilho\nconst NAVIGATION_TRIGGER_DISTANCE_METERS = 50; // Dispara o envio da instrução a 50 metros\n\nconst libraries: \"places\"[] = [\"places\"];\n\nfunction App() {\n  const { isLoaded } = useJsApiLoader({\n    id: 'google-map-script',\n    googleMapsApiKey: GOOGLE_MAPS_API_KEY,\n    libraries,\n  });\n\n  // Estados da aplicação\n  const [appState, setAppState] = useState<AppState>('loading');\n  const [introStep, setIntroStep] = useState(0);\n  const [showLocationRequest, setShowLocationRequest] = useState(false);\n\n  const [map, setMap] = useState<google.maps.Map | null>(null);\n  const [directionsResponse, setDirectionsResponse] = useState<google.maps.DirectionsResult | null>(null);\n  const [currentPosition, setCurrentPosition] = useState<google.maps.LatLngLiteral | null>(null);\n  const [simplifiedInstructions, setSimplifiedInstructions] = useState<string[]>([]);\n  \n  // Novos estados para gerenciar a navegação e rotas salvas\n  const [isNavigating, setIsNavigating] = useState(false);\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\n  const [savedRoutes, setSavedRoutes] = useState<SavedRoute[]>([]);\n  const locationWatcherId = useRef<number | null>(null);\n  \n  // Estados para Bluetooth\n  const [isBluetoothConnected, setIsBluetoothConnected] = useState(false);\n  const [bluetoothDevice, setBluetoothDevice] = useState<BluetoothDevice | null>(null);\n  const [bluetoothCharacteristic, setBluetoothCharacteristic] = useState<BluetoothRemoteGATTCharacteristic | null>(null);\n  const [isConnectingBluetooth, setIsConnectingBluetooth] = useState(false);\n  \n  const destinationRef = useRef<HTMLInputElement>(null);\n\n  // Sistema de sons\n  const { playSound, playHoverSound, preloadSounds } = useSounds();\n\n  // Animação de entrada\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setAppState('intro');\n    }, 2000);\n\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Sequência de animação do intro\n  useEffect(() => {\n    if (appState === 'intro') {\n      const timer = setTimeout(() => {\n        setIntroStep(1);\n      }, 1000);\n\n      return () => clearTimeout(timer);\n    }\n  }, [appState]);\n\n  useEffect(() => {\n    if (introStep === 1) {\n      const timer = setTimeout(() => {\n        setIntroStep(2);\n      }, 1500);\n\n      return () => clearTimeout(timer);\n    }\n  }, [introStep]);\n\n  useEffect(() => {\n    if (introStep === 2) {\n      const timer = setTimeout(() => {\n        setShowLocationRequest(true);\n      }, 1000);\n\n      return () => clearTimeout(timer);\n    }\n  }, [introStep]);\n\n  // Sistema offline\n  const { \n    isOnline: isOnlineStatus, \n    registerServiceWorker, \n    saveOfflineData, \n    getOfflineData,\n    sendNotification \n  } = useOffline();\n\n  // Novo estado para o modo offline (usando hook offline)\n  const [isOnline, setIsOnline] = useState(isOnlineStatus);\n\n  // Verificar se o navegador suporta Web Bluetooth\n  const isBluetoothSupported = () => {\n    return 'bluetooth' in navigator;\n  };\n\n  // Função para conectar ao ESP32 via Bluetooth\n  const connectToESP32 = async () => {\n    playSound('click');\n    if (!isBluetoothSupported() || !navigator.bluetooth) {\n      alert(\"Seu navegador não suporta Web Bluetooth. Use Chrome ou Edge.\");\n      playSound('error');\n      return;\n    }\n\n    setIsConnectingBluetooth(true);\n    \n    try {\n      // Solicitar dispositivo Bluetooth\n      const device = await navigator.bluetooth.requestDevice({\n        filters: [\n          {\n            name: ESP32_DEVICE_NAME\n          },\n          {\n            namePrefix: \"ESP32\"\n          }\n        ],\n        optionalServices: [ESP32_SERVICE_UUID]\n      });\n\n      console.log(\"Dispositivo selecionado:\", device.name);\n\n      // Conectar ao GATT Server\n      const server = await device.gatt?.connect();\n      if (!server) {\n        throw new Error(\"Não foi possível conectar ao servidor GATT\");\n      }\n\n      // Obter o serviço\n      const service = await server.getPrimaryService(ESP32_SERVICE_UUID);\n      \n      // Obter a característica para escrita\n      const characteristic = await service.getCharacteristic(ESP32_CHARACTERISTIC_UUID);\n      \n      // Habilitar notificações se disponível\n      try {\n        await characteristic.startNotifications();\n        characteristic.addEventListener('characteristicvaluechanged', (event) => {\n          const target = event.target as unknown as BluetoothRemoteGATTCharacteristic;\n          const value = target.value;\n          if (value) {\n            const decoder = new TextDecoder();\n            const message = decoder.decode(value);\n            console.log(\"Mensagem recebida do ESP32:\", message);\n          }\n        });\n      } catch (error) {\n        console.log(\"Notificações não disponíveis, apenas escrita\");\n      }\n\n      setBluetoothDevice({\n        id: device.id,\n        name: device.name || ESP32_DEVICE_NAME,\n        gatt: server\n      });\n      setBluetoothCharacteristic(characteristic);\n      setIsBluetoothConnected(true);\n      \n      console.log(\"Conectado ao ESP32 via Bluetooth!\");\n      alert(\"Conectado ao ESP32 via Bluetooth!\");\n      playSound('connect');\n      \n    } catch (error) {\n      console.error(\"Erro ao conectar Bluetooth:\", error);\n      if (error instanceof Error) {\n        if (error.name === 'NotFoundError') {\n          alert(\"ESP32 não encontrado. Verifique se está ligado e visível.\");\n        } else if (error.name === 'NotAllowedError') {\n          alert(\"Permissão negada para Bluetooth.\");\n        } else {\n          alert(`Erro de conexão: ${error.message}`);\n        }\n      } else {\n        alert(\"Erro desconhecido ao conectar Bluetooth.\");\n        playSound('error');\n      }\n    } finally {\n      setIsConnectingBluetooth(false);\n    }\n  };\n\n  // Função para desconectar Bluetooth\n  const disconnectBluetooth = async () => {\n    playSound('click');\n    if (bluetoothDevice?.gatt?.connected) {\n      await bluetoothDevice.gatt.disconnect();\n    }\n    setBluetoothDevice(null);\n    setBluetoothCharacteristic(null);\n    setIsBluetoothConnected(false);\n    console.log(\"Desconectado do ESP32\");\n    playSound('disconnect');\n  };\n\n  // Função para enviar instrução via Bluetooth\n  const sendInstructionViaBluetooth = useCallback(async (instruction: string) => {\n    if (!bluetoothCharacteristic || !isBluetoothConnected) {\n      console.error(\"Bluetooth não conectado\");\n      return;\n    }\n\n    try {\n      const encoder = new TextEncoder();\n      const data = encoder.encode(instruction + '\\n'); // Adiciona quebra de linha\n      \n      await bluetoothCharacteristic.writeValue(data);\n      console.log(`Instrução enviada via Bluetooth: ${instruction}`);\n    } catch (error) {\n      console.error(\"Erro ao enviar via Bluetooth:\", error);\n      alert(\"Erro ao enviar instrução via Bluetooth. Verifique a conexão.\");\n    }\n  }, [bluetoothCharacteristic, isBluetoothConnected]);\n\n  // Função para enviar instrução (agora usa Bluetooth em vez de HTTP)\n  const sendSingleInstructionToESP32 = useCallback(async (instruction: string) => {\n    if (isBluetoothConnected) {\n      await sendInstructionViaBluetooth(instruction);\n    } else {\n      console.log(\"Bluetooth não conectado. Instrução não enviada.\");\n      alert(\"Conecte ao ESP32 via Bluetooth primeiro.\");\n    }\n  }, [isBluetoothConnected, sendInstructionViaBluetooth]);\n\n  // Solicitar localização\n  const requestLocation = () => {\n    playSound('click');\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const pos = {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          };\n          setCurrentPosition(pos);\n          setShowLocationRequest(false);\n          setAppState('main');\n          playSound('success');\n        },\n        () => {\n          alert(\"Erro: O serviço de geolocalização falhou.\");\n          playSound('error');\n        }\n      );\n    } else {\n      alert(\"Erro: Seu navegador não suporta geolocalização.\");\n      playSound('error');\n    }\n  };\n\n  // Efeito para monitorar o status da conexão (online/offline)\n  useEffect(() => {\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n\n  // Efeito para carregar as rotas salvas do localStorage ao iniciar\n  useEffect(() => {\n    try {\n      const routesFromStorage = localStorage.getItem('savedNavigationRoutes');\n      if (routesFromStorage) {\n        setSavedRoutes(JSON.parse(routesFromStorage));\n      }\n    } catch (error) {\n      console.error(\"Erro ao carregar rotas do localStorage:\", error);\n    }\n  }, []);\n\n  // Pré-carregar sons quando a aplicação inicia\n  useEffect(() => {\n    preloadSounds();\n  }, [preloadSounds]);\n\n  // Registrar service worker para funcionalidade offline\n  useEffect(() => {\n    registerServiceWorker();\n  }, [registerServiceWorker]);\n\n  // Nova função para calcular a distância entre dois pontos de GPS (fórmula de Haversine)\n  const getDistanceInMeters = useCallback((pos1: google.maps.LatLngLiteral, pos2: google.maps.LatLngLiteral) => {\n    const R = 6371e3; // Metros\n    const p1 = (pos1.lat * Math.PI) / 180;\n    const p2 = (pos2.lat * Math.PI) / 180;\n    const deltaP = ((pos2.lat - pos1.lat) * Math.PI) / 180;\n    const deltaL = ((pos2.lng - pos1.lng) * Math.PI) / 180;\n    const a =\n      Math.sin(deltaP / 2) * Math.sin(deltaP / 2) +\n      Math.cos(p1) * Math.cos(p2) * Math.sin(deltaL / 2) * Math.sin(deltaL / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c; // em metros\n  }, []);\n\n  const calculateRoute = async () => {\n    playSound('click');\n    if (!isOnline) {\n      alert(\"Funcionalidade indisponível offline. Carregue uma rota salva.\");\n      playSound('error');\n      return;\n    }\n    if (!destinationRef.current?.value || !currentPosition) {\n      playSound('error');\n      return;\n    }\n    \n    const directionsService = new google.maps.DirectionsService();\n    const results = await directionsService.route({\n      origin: currentPosition,\n      destination: destinationRef.current.value,\n      travelMode: google.maps.TravelMode.DRIVING,\n      language: 'pt-BR', // Instruções em Português\n    });\n\n    setDirectionsResponse(results);\n    generateSimplifiedInstructions(results);\n    playSound('success');\n  };\n  \n  const generateSimplifiedInstructions = (directions: google.maps.DirectionsResult) => {\n    if (!directions.routes || directions.routes.length === 0) {\n      return;\n    }\n    const route = directions.routes[0].legs[0];\n    const instructions = route.steps.map((step: google.maps.DirectionsStep) => {\n      // Remove tags HTML da instrução (ex: <b>, <div>)\n      const cleanInstruction = step.instructions.replace(/<[^>]*>/g, '');\n      const distance = step.distance?.text || '';\n      return `${cleanInstruction} (${distance})`;\n    });\n    setSimplifiedInstructions(instructions);\n  };\n\n  // Funções para gerenciar rotas salvas\n  const saveCurrentRoute = () => {\n    if (!isOnline) {\n      alert(\"Funcionalidade indisponível offline.\");\n      return;\n    }\n    if (!directionsResponse || !destinationRef.current?.value) {\n      alert(\"Nenhuma rota calculada para salvar.\");\n      return;\n    }\n\n    const routeName = destinationRef.current.value;\n\n    if (savedRoutes.some(route => route.name === routeName)) {\n      if (!window.confirm(`Uma rota para \"${routeName}\" já existe. Deseja substituí-la?`)) {\n        return;\n      }\n    }\n\n    const newRoute: SavedRoute = { name: routeName, directions: directionsResponse };\n    const updatedRoutes = savedRoutes.filter(route => route.name !== routeName);\n    updatedRoutes.push(newRoute);\n\n    setSavedRoutes(updatedRoutes);\n    localStorage.setItem('savedNavigationRoutes', JSON.stringify(updatedRoutes));\n    alert(`Rota para \"${routeName}\" salva com sucesso!`);\n  };\n\n  const loadSavedRoute = (routeToLoad: SavedRoute) => {\n    setDirectionsResponse(routeToLoad.directions);\n    generateSimplifiedInstructions(routeToLoad.directions);\n    setIsNavigating(false);\n    if (destinationRef.current) {\n        destinationRef.current.value = routeToLoad.name;\n    }\n    alert(`Rota para \"${routeToLoad.name}\" carregada.`);\n  };\n\n  const deleteSavedRoute = (indexToDelete: number) => {\n    if (window.confirm(\"Tem certeza que deseja deletar esta rota?\")) {\n      const updatedRoutes = savedRoutes.filter((_, index) => index !== indexToDelete);\n      setSavedRoutes(updatedRoutes);\n      localStorage.setItem('savedNavigationRoutes', JSON.stringify(updatedRoutes));\n    }\n  };\n\n  const stopNavigation = () => {\n    playSound('click');\n    if (locationWatcherId.current !== null) {\n      navigator.geolocation.clearWatch(locationWatcherId.current);\n      locationWatcherId.current = null;\n    }\n    setIsNavigating(false);\n    alert(\"Navegação encerrada.\");\n    playSound('notification');\n  };\n\n  const advanceToStep = useCallback((stepIndex: number) => {\n    if (!directionsResponse) return;\n    const route = directionsResponse.routes[0].legs[0];\n    if (stepIndex >= route.steps.length) {\n      sendSingleInstructionToESP32(\"Você chegou ao seu destino!\");\n      stopNavigation();\n      playSound('success');\n      return;\n    }\n    const step = route.steps[stepIndex];\n    const instructionText = step.instructions.replace(/<[^>]*>/g, '');\n    sendSingleInstructionToESP32(instructionText);\n    setCurrentStepIndex(prevIndex => prevIndex + 1);\n    playSound('instruction');\n  }, [directionsResponse, sendSingleInstructionToESP32]);\n\n  const handleLocationUpdate = useCallback((position: GeolocationPosition) => {\n    if (!directionsResponse?.routes[0]) return;\n    const userPosition: google.maps.LatLngLiteral = {\n      lat: position.coords.latitude,\n      lng: position.coords.longitude,\n    };\n    setCurrentPosition(userPosition);\n    const route = directionsResponse.routes[0].legs[0];\n    if (currentStepIndex >= route.steps.length) {\n      advanceToStep(currentStepIndex); // Para enviar a mensagem final\n      return;\n    }\n    const nextStep = route.steps[currentStepIndex];\n    \n    let nextStepLocation: google.maps.LatLngLiteral;\n    const startLocation = nextStep.start_location;\n\n    if (typeof startLocation.lat === 'function') {\n      nextStepLocation = { lat: startLocation.lat(), lng: startLocation.lng() };\n    } else {\n      nextStepLocation = startLocation as unknown as google.maps.LatLngLiteral;\n    }\n\n    const distance = getDistanceInMeters(userPosition, nextStepLocation);\n    if (distance < NAVIGATION_TRIGGER_DISTANCE_METERS) {\n      advanceToStep(currentStepIndex);\n    }\n  }, [directionsResponse, currentStepIndex, advanceToStep, getDistanceInMeters]);\n\n  const handleLocationError = useCallback((error: GeolocationPositionError) => {\n    alert(`Erro de geolocalização: ${error.message}`);\n    stopNavigation();\n  }, []);\n  \n  // Este useEffect é o cérebro da navegação em tempo real\n  useEffect(() => {\n    if (!isNavigating) {\n        return;\n    }\n\n    locationWatcherId.current = navigator.geolocation.watchPosition(\n      handleLocationUpdate, \n      handleLocationError,\n      { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }\n    );\n\n    return () => {\n      if (locationWatcherId.current !== null) {\n        navigator.geolocation.clearWatch(locationWatcherId.current);\n      }\n    };\n  }, [isNavigating, handleLocationUpdate, handleLocationError]);\n\n  const startNavigation = () => {\n    playSound('click');\n    if (!directionsResponse) {\n      alert(\"Carregue uma rota primeiro.\");\n      playSound('error');\n      return;\n    }\n    stopNavigation(); // Garante que qualquer watch anterior seja limpo\n    setCurrentStepIndex(0);\n    setIsNavigating(true);\n    alert(\"Iniciando a navegação!\");\n    playSound('navigation');\n  };\n  \n  const forceNextInstruction = () => {\n      if (!isNavigating) {\n          alert(\"A navegação não está ativa.\");\n          return;\n      }\n      advanceToStep(currentStepIndex);\n  };\n\n  if (!isLoaded) return <div className=\"loading-screen\">Carregando...</div>;\n\n  // Tela de carregamento\n  if (appState === 'loading') {\n    return (\n      <div className=\"loading-screen\">\n        <div className=\"loading-logo\">\n          <img src=\"/assets/glasses-logo.png\" alt=\"Castrilha\" className=\"glasses-image\" />\n        </div>\n        <div className=\"loading-text\">Castrilha</div>\n      </div>\n    );\n  }\n\n  // Tela de introdução\n  if (appState === 'intro') {\n    return (\n      <div className=\"intro-screen\">\n        <div className={`intro-logo ${introStep >= 1 ? 'animate' : ''}`}>\n          <img src=\"/assets/glasses-logo.png\" alt=\"Castrilha\" className=\"glasses-image\" />\n        </div>\n        <div className={`intro-title ${introStep >= 2 ? 'animate' : ''}`}>\n          <img src=\"/assets/nomepx.png\" alt=\"Castrilha\" className=\"title-image\" />\n        </div>\n        {showLocationRequest && (\n          <div className=\"location-request\">\n            <h3>Permitir acesso à localização?</h3>\n            <p>Precisamos da sua localização para fornecer navegação precisa.</p>\n            <button className=\"btn-primary\" onClick={requestLocation}>\n              Permitir Localização\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  // Tela principal\n  return (\n    <div className='app-container'>\n      <div className='sidebar'>\n        <div className='header'>\n          <div className='logo-container'>\n            <img src=\"/assets/glasses-logo-small.png\" alt=\"Castrilha\" className=\"glasses-logo-image\" />\n            <h1 className='app-title'>Castrilha</h1>\n          </div>\n          <SoundControls className=\"header-sound-controls\" />\n        </div>\n        \n        {!isOnline && (\n          <div className='offline-banner'>\n            <p>MODO OFFLINE ATIVO</p>\n          </div>\n        )}\n\n        <div className='bluetooth-controls'>\n          <h3>🔵 Conexão Bluetooth</h3>\n          <div className='bluetooth-status'>\n            {isBluetoothConnected ? (\n              <div className='connected-status'>\n                <span className='status-indicator connected'></span>\n                <span>Conectado: {bluetoothDevice?.name}</span>\n                <button \n                  className='button disconnect-btn' \n                  onClick={disconnectBluetooth}\n                >\n                  Desconectar\n                </button>\n              </div>\n            ) : (\n              <div className='disconnected-status'>\n                <span className='status-indicator disconnected'></span>\n                <span>Desconectado</span>\n                <button \n                  className='button connect-btn' \n                  onClick={connectToESP32}\n                  disabled={isConnectingBluetooth}\n                >\n                  {isConnectingBluetooth ? 'Conectando...' : 'Conectar ESP32'}\n                </button>\n              </div>\n            )}\n          </div>\n          {!isBluetoothSupported() && (\n            <div className='bluetooth-warning'>\n              ⚠️ Seu navegador não suporta Web Bluetooth. Use Chrome ou Edge.\n            </div>\n          )}\n        </div>\n\n        <div className='controls-container'>\n          <h2>Navegação Ponto a Ponto</h2>\n          <div className='input-group'>\n            <Autocomplete>\n              <input \n                type='text' \n                placeholder='Destino' \n                ref={destinationRef}\n                disabled={!isOnline}\n              />\n            </Autocomplete>\n          </div>\n          <div className='button-group'>\n            <button \n              className='button' \n              onClick={calculateRoute}\n              disabled={!isOnline}\n            >\n              Obter Rota\n            </button>\n            <button \n              className='button' \n              onClick={saveCurrentRoute}\n              disabled={!isOnline}\n            >\n              Salvar Rota Atual\n            </button>\n          </div>\n        </div>\n\n        <div className='navigation-controls'>\n          <h3>Controle de Navegação</h3>\n          <div className='button-group'>\n            {!isNavigating ? (\n                <button onClick={startNavigation} className='button start-nav-btn' disabled={!directionsResponse}>\n                    Iniciar Navegação\n                </button>\n            ) : (\n                <button onClick={stopNavigation} className='button stop-nav-btn'>\n                    Parar Navegação\n                </button>\n            )}\n            <button onClick={forceNextInstruction} className='button' disabled={!isNavigating}>\n                Próxima Instrução (Teste)\n            </button>\n          </div>\n          {isNavigating && (\n              <p className='nav-status'>Navegação em curso... Próximo passo: {currentStepIndex + 1}</p>\n          )}\n        </div>\n\n        <div className='saved-routes-container'>\n          <h3>Rotas Salvas</h3>\n          <ul className='route-list'>\n            {savedRoutes.length > 0 ? (\n              savedRoutes.map((route, index) => (\n                <li key={index} className='route-item'>\n                  <span>{route.name}</span>\n                  <div className='route-item-buttons'>\n                    <button onClick={() => loadSavedRoute(route)}>Carregar</button>\n                    <button onClick={() => deleteSavedRoute(index)} className='delete-btn'>X</button>\n                  </div>\n                </li>\n              ))\n            ) : (\n              <p>Nenhuma rota salva.</p>\n            )}\n          </ul>\n        </div>\n\n        <div className='instructions-container'>\n            <h3>Instruções</h3>\n            <ul className='instructions-list'>\n                {simplifiedInstructions.map((inst, index) => (\n                    <li key={index} className={index === currentStepIndex -1 ? 'current-instruction' : ''}>\n                        {inst}\n                    </li>\n                ))}\n            </ul>\n        </div>\n      </div>\n\n      <div className='map-container'>\n        {isOnline ? (\n          <GoogleMap\n            mapContainerStyle={containerStyle}\n            center={currentPosition || { lat: -23.55052, lng: -46.633308 }}\n            zoom={15}\n            onLoad={setMap}\n            options={{\n              mapTypeControl: false,\n              streetViewControl: false,\n              fullscreenControl: false,\n            }}\n          >\n            {directionsResponse && <DirectionsRenderer directions={directionsResponse} />}\n            {currentPosition && <Marker position={currentPosition} />}\n          </GoogleMap>\n        ) : (\n          <div className='offline-map-placeholder'>\n            <h2>Mapa indisponível em modo offline</h2>\n            <p>Use as rotas salvas para navegar. A sua localização continua sendo rastreada.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}