{"ast":null,"code":"import React,{useState,useRef,useEffect,useCallback}from'react';import{GoogleMap,useJsApiLoader,Marker,Autocomplete,DirectionsRenderer}from'@react-google-maps/api';import{useSounds}from'./hooks/useSounds';import{useOffline}from'./hooks/useOffline';import{SoundControls}from'./components/SoundControls';import{OfflineStatus}from'./components/OfflineStatus';// Defini√ß√µes de tipos para Web Bluetooth API\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// ##################################################################\n// # COLOQUE SUAS CHAVES AQUI                                       #\n// ##################################################################\n// 1. CHAVE DA API GOOGLE MAPS PLATFORM\n//    Ative as APIs: \"Maps JavaScript API\", \"Directions API\", \"Places API\"\n//    Instru√ß√µes: https://developers.google.com/maps/gmp-get-started\nconst GOOGLE_MAPS_API_KEY=\"AIzaSyAVEzH5bvFPDpgjQtnA4s2TKfjEW_0OTLY\";// 2. CONFIGURA√á√ïES BLUETOOTH\n//    Nome do dispositivo ESP32 que aparecer√° na lista de dispositivos Bluetooth\nconst ESP32_DEVICE_NAME=\"ESP32_Navigation\";// Altere para o nome do seu ESP32\nconst ESP32_SERVICE_UUID=\"0000ffe0-0000-1000-8000-00805f9b34fb\";// UUID do servi√ßo\nconst ESP32_CHARACTERISTIC_UUID=\"0000ffe1-0000-1000-8000-00805f9b34fb\";// UUID da caracter√≠stica\n// ##################################################################\n// Interface para a estrutura da rota salva\n// Interface para dispositivo Bluetooth\n// Estados da aplica√ß√£o\nconst containerStyle={width:'100%',height:'100%'};// Adicionando uma constante para a dist√¢ncia de gatilho\nconst NAVIGATION_TRIGGER_DISTANCE_METERS=50;// Dispara o envio da instru√ß√£o a 50 metros\nconst libraries=[\"places\"];function App(){const{isLoaded}=useJsApiLoader({id:'google-map-script',googleMapsApiKey:GOOGLE_MAPS_API_KEY,libraries});// Estados da aplica√ß√£o\nconst[appState,setAppState]=useState('loading');const[introStep,setIntroStep]=useState(0);const[showLocationRequest,setShowLocationRequest]=useState(false);const[map,setMap]=useState(null);const[directionsResponse,setDirectionsResponse]=useState(null);const[currentPosition,setCurrentPosition]=useState(null);const[simplifiedInstructions,setSimplifiedInstructions]=useState([]);// Novos estados para gerenciar a navega√ß√£o e rotas salvas\nconst[isNavigating,setIsNavigating]=useState(false);const[currentStepIndex,setCurrentStepIndex]=useState(0);const[savedRoutes,setSavedRoutes]=useState([]);const locationWatcherId=useRef(null);// Estados para Bluetooth\nconst[isBluetoothConnected,setIsBluetoothConnected]=useState(false);const[bluetoothDevice,setBluetoothDevice]=useState(null);const[bluetoothCharacteristic,setBluetoothCharacteristic]=useState(null);const[isConnectingBluetooth,setIsConnectingBluetooth]=useState(false);const destinationRef=useRef(null);// Sistema de sons\nconst{playSound,playHoverSound,preloadSounds}=useSounds();// Anima√ß√£o de entrada\nuseEffect(()=>{const timer=setTimeout(()=>{setAppState('intro');},2000);return()=>clearTimeout(timer);},[]);// Sequ√™ncia de anima√ß√£o do intro\nuseEffect(()=>{if(appState==='intro'){const timer=setTimeout(()=>{setIntroStep(1);},1000);return()=>clearTimeout(timer);}},[appState]);useEffect(()=>{if(introStep===1){const timer=setTimeout(()=>{setIntroStep(2);},1500);return()=>clearTimeout(timer);}},[introStep]);useEffect(()=>{if(introStep===2){const timer=setTimeout(()=>{setShowLocationRequest(true);},1000);return()=>clearTimeout(timer);}},[introStep]);// Sistema offline\nconst{isOnline,registerServiceWorker,saveOfflineData,getOfflineData,sendNotification}=useOffline();// Verificar se o navegador suporta Web Bluetooth\nconst isBluetoothSupported=()=>{return'bluetooth'in navigator;};// Fun√ß√£o para conectar ao ESP32 via Bluetooth\nconst connectToESP32=async()=>{playSound('click');if(!isBluetoothSupported()||!navigator.bluetooth){alert(\"Seu navegador n√£o suporta Web Bluetooth. Use Chrome ou Edge.\");playSound('error');return;}setIsConnectingBluetooth(true);try{var _device$gatt;// Solicitar dispositivo Bluetooth\nconst device=await navigator.bluetooth.requestDevice({filters:[{name:ESP32_DEVICE_NAME},{namePrefix:\"ESP32\"}],optionalServices:[ESP32_SERVICE_UUID]});console.log(\"Dispositivo selecionado:\",device.name);// Conectar ao GATT Server\nconst server=await((_device$gatt=device.gatt)===null||_device$gatt===void 0?void 0:_device$gatt.connect());if(!server){throw new Error(\"N√£o foi poss√≠vel conectar ao servidor GATT\");}// Obter o servi√ßo\nconst service=await server.getPrimaryService(ESP32_SERVICE_UUID);// Obter a caracter√≠stica para escrita\nconst characteristic=await service.getCharacteristic(ESP32_CHARACTERISTIC_UUID);// Habilitar notifica√ß√µes se dispon√≠vel\ntry{await characteristic.startNotifications();characteristic.addEventListener('characteristicvaluechanged',event=>{const target=event.target;const value=target.value;if(value){const decoder=new TextDecoder();const message=decoder.decode(value);console.log(\"Mensagem recebida do ESP32:\",message);}});}catch(error){console.log(\"Notifica√ß√µes n√£o dispon√≠veis, apenas escrita\");}setBluetoothDevice({id:device.id,name:device.name||ESP32_DEVICE_NAME,gatt:server});setBluetoothCharacteristic(characteristic);setIsBluetoothConnected(true);console.log(\"Conectado ao ESP32 via Bluetooth!\");alert(\"Conectado ao ESP32 via Bluetooth!\");playSound('connect');}catch(error){console.error(\"Erro ao conectar Bluetooth:\",error);if(error instanceof Error){if(error.name==='NotFoundError'){alert(\"ESP32 n√£o encontrado. Verifique se est√° ligado e vis√≠vel.\");}else if(error.name==='NotAllowedError'){alert(\"Permiss√£o negada para Bluetooth.\");}else{alert(\"Erro de conex\\xE3o: \".concat(error.message));}}else{alert(\"Erro desconhecido ao conectar Bluetooth.\");playSound('error');}}finally{setIsConnectingBluetooth(false);}};// Fun√ß√£o para desconectar Bluetooth\nconst disconnectBluetooth=async()=>{var _bluetoothDevice$gatt;playSound('click');if(bluetoothDevice!==null&&bluetoothDevice!==void 0&&(_bluetoothDevice$gatt=bluetoothDevice.gatt)!==null&&_bluetoothDevice$gatt!==void 0&&_bluetoothDevice$gatt.connected){await bluetoothDevice.gatt.disconnect();}setBluetoothDevice(null);setBluetoothCharacteristic(null);setIsBluetoothConnected(false);console.log(\"Desconectado do ESP32\");playSound('disconnect');};// Fun√ß√£o para enviar instru√ß√£o via Bluetooth\nconst sendInstructionViaBluetooth=useCallback(async instruction=>{if(!bluetoothCharacteristic||!isBluetoothConnected){console.error(\"Bluetooth n√£o conectado\");return;}try{const encoder=new TextEncoder();const data=encoder.encode(instruction+'\\n');// Adiciona quebra de linha\nawait bluetoothCharacteristic.writeValue(data);console.log(\"Instru\\xE7\\xE3o enviada via Bluetooth: \".concat(instruction));}catch(error){console.error(\"Erro ao enviar via Bluetooth:\",error);alert(\"Erro ao enviar instru√ß√£o via Bluetooth. Verifique a conex√£o.\");}},[bluetoothCharacteristic,isBluetoothConnected]);// Fun√ß√£o para enviar instru√ß√£o (agora usa Bluetooth em vez de HTTP)\nconst sendSingleInstructionToESP32=useCallback(async instruction=>{if(isBluetoothConnected){await sendInstructionViaBluetooth(instruction);}else{console.log(\"Bluetooth n√£o conectado. Instru√ß√£o n√£o enviada.\");alert(\"Conecte ao ESP32 via Bluetooth primeiro.\");}},[isBluetoothConnected,sendInstructionViaBluetooth]);// Solicitar localiza√ß√£o\nconst requestLocation=()=>{playSound('click');if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{const pos={lat:position.coords.latitude,lng:position.coords.longitude};setCurrentPosition(pos);setShowLocationRequest(false);setAppState('main');playSound('success');},()=>{alert(\"Erro: O servi√ßo de geolocaliza√ß√£o falhou.\");playSound('error');});}else{alert(\"Erro: Seu navegador n√£o suporta geolocaliza√ß√£o.\");playSound('error');}};// O hook useOffline j√° monitora o status online/offline automaticamente\n// Efeito para carregar as rotas salvas do localStorage ao iniciar\nuseEffect(()=>{try{const routesFromStorage=localStorage.getItem('savedNavigationRoutes');if(routesFromStorage){setSavedRoutes(JSON.parse(routesFromStorage));}}catch(error){console.error(\"Erro ao carregar rotas do localStorage:\",error);}},[]);// Pr√©-carregar sons quando a aplica√ß√£o inicia\nuseEffect(()=>{preloadSounds();},[preloadSounds]);// Registrar service worker para funcionalidade offline\nuseEffect(()=>{registerServiceWorker();},[registerServiceWorker]);// Nova fun√ß√£o para calcular a dist√¢ncia entre dois pontos de GPS (f√≥rmula de Haversine)\nconst getDistanceInMeters=useCallback((pos1,pos2)=>{const R=6371e3;// Metros\nconst p1=pos1.lat*Math.PI/180;const p2=pos2.lat*Math.PI/180;const deltaP=(pos2.lat-pos1.lat)*Math.PI/180;const deltaL=(pos2.lng-pos1.lng)*Math.PI/180;const a=Math.sin(deltaP/2)*Math.sin(deltaP/2)+Math.cos(p1)*Math.cos(p2)*Math.sin(deltaL/2)*Math.sin(deltaL/2);const c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return R*c;// em metros\n},[]);const calculateRoute=async()=>{var _destinationRef$curre;playSound('click');if(!isOnline){alert(\"Funcionalidade indispon√≠vel offline. Carregue uma rota salva.\");playSound('error');return;}if(!((_destinationRef$curre=destinationRef.current)!==null&&_destinationRef$curre!==void 0&&_destinationRef$curre.value)||!currentPosition){playSound('error');return;}const directionsService=new google.maps.DirectionsService();const results=await directionsService.route({origin:currentPosition,destination:destinationRef.current.value,travelMode:google.maps.TravelMode.DRIVING,language:'pt-BR'// Instru√ß√µes em Portugu√™s\n});setDirectionsResponse(results);generateSimplifiedInstructions(results);playSound('success');};const generateSimplifiedInstructions=directions=>{if(!directions.routes||directions.routes.length===0){return;}const route=directions.routes[0].legs[0];const instructions=route.steps.map(step=>{var _step$distance;// Remove tags HTML da instru√ß√£o (ex: <b>, <div>)\nconst cleanInstruction=step.instructions.replace(/<[^>]*>/g,'');const distance=((_step$distance=step.distance)===null||_step$distance===void 0?void 0:_step$distance.text)||'';return\"\".concat(cleanInstruction,\" (\").concat(distance,\")\");});setSimplifiedInstructions(instructions);};// Fun√ß√µes para gerenciar rotas salvas\nconst saveCurrentRoute=()=>{var _destinationRef$curre2;if(!isOnline){alert(\"Funcionalidade indispon√≠vel offline.\");return;}if(!directionsResponse||!((_destinationRef$curre2=destinationRef.current)!==null&&_destinationRef$curre2!==void 0&&_destinationRef$curre2.value)){alert(\"Nenhuma rota calculada para salvar.\");return;}const routeName=destinationRef.current.value;if(savedRoutes.some(route=>route.name===routeName)){if(!window.confirm(\"Uma rota para \\\"\".concat(routeName,\"\\\" j\\xE1 existe. Deseja substitu\\xED-la?\"))){return;}}const newRoute={name:routeName,directions:directionsResponse};const updatedRoutes=savedRoutes.filter(route=>route.name!==routeName);updatedRoutes.push(newRoute);setSavedRoutes(updatedRoutes);localStorage.setItem('savedNavigationRoutes',JSON.stringify(updatedRoutes));alert(\"Rota para \\\"\".concat(routeName,\"\\\" salva com sucesso!\"));};const loadSavedRoute=routeToLoad=>{setDirectionsResponse(routeToLoad.directions);generateSimplifiedInstructions(routeToLoad.directions);setIsNavigating(false);if(destinationRef.current){destinationRef.current.value=routeToLoad.name;}alert(\"Rota para \\\"\".concat(routeToLoad.name,\"\\\" carregada.\"));};const deleteSavedRoute=indexToDelete=>{if(window.confirm(\"Tem certeza que deseja deletar esta rota?\")){const updatedRoutes=savedRoutes.filter((_,index)=>index!==indexToDelete);setSavedRoutes(updatedRoutes);localStorage.setItem('savedNavigationRoutes',JSON.stringify(updatedRoutes));}};const stopNavigation=()=>{playSound('click');if(locationWatcherId.current!==null){navigator.geolocation.clearWatch(locationWatcherId.current);locationWatcherId.current=null;}setIsNavigating(false);alert(\"Navega√ß√£o encerrada.\");playSound('notification');};const advanceToStep=useCallback(stepIndex=>{if(!directionsResponse)return;const route=directionsResponse.routes[0].legs[0];if(stepIndex>=route.steps.length){sendSingleInstructionToESP32(\"Voc√™ chegou ao seu destino!\");stopNavigation();playSound('success');return;}const step=route.steps[stepIndex];const instructionText=step.instructions.replace(/<[^>]*>/g,'');sendSingleInstructionToESP32(instructionText);setCurrentStepIndex(prevIndex=>prevIndex+1);playSound('instruction');},[directionsResponse,sendSingleInstructionToESP32]);const handleLocationUpdate=useCallback(position=>{if(!(directionsResponse!==null&&directionsResponse!==void 0&&directionsResponse.routes[0]))return;const userPosition={lat:position.coords.latitude,lng:position.coords.longitude};setCurrentPosition(userPosition);const route=directionsResponse.routes[0].legs[0];if(currentStepIndex>=route.steps.length){advanceToStep(currentStepIndex);// Para enviar a mensagem final\nreturn;}const nextStep=route.steps[currentStepIndex];let nextStepLocation;const startLocation=nextStep.start_location;if(typeof startLocation.lat==='function'){nextStepLocation={lat:startLocation.lat(),lng:startLocation.lng()};}else{nextStepLocation=startLocation;}const distance=getDistanceInMeters(userPosition,nextStepLocation);if(distance<NAVIGATION_TRIGGER_DISTANCE_METERS){advanceToStep(currentStepIndex);}},[directionsResponse,currentStepIndex,advanceToStep,getDistanceInMeters]);const handleLocationError=useCallback(error=>{alert(\"Erro de geolocaliza\\xE7\\xE3o: \".concat(error.message));stopNavigation();},[]);// Este useEffect √© o c√©rebro da navega√ß√£o em tempo real\nuseEffect(()=>{if(!isNavigating){return;}locationWatcherId.current=navigator.geolocation.watchPosition(handleLocationUpdate,handleLocationError,{enableHighAccuracy:true,timeout:10000,maximumAge:0});return()=>{if(locationWatcherId.current!==null){navigator.geolocation.clearWatch(locationWatcherId.current);}};},[isNavigating,handleLocationUpdate,handleLocationError]);const startNavigation=()=>{playSound('click');if(!directionsResponse){alert(\"Carregue uma rota primeiro.\");playSound('error');return;}stopNavigation();// Garante que qualquer watch anterior seja limpo\nsetCurrentStepIndex(0);setIsNavigating(true);alert(\"Iniciando a navega√ß√£o!\");playSound('navigation');};const forceNextInstruction=()=>{if(!isNavigating){alert(\"A navega√ß√£o n√£o est√° ativa.\");return;}advanceToStep(currentStepIndex);};if(!isLoaded)return/*#__PURE__*/_jsx(\"div\",{className:\"loading-screen\",children:\"Carregando...\"});// Tela de carregamento\nif(appState==='loading'){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-screen\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-logo\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/assets/glasses-logo.png\",alt:\"Castrilha\",className:\"glasses-image\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-text\",children:\"Castrilha\"})]});}// Tela de introdu√ß√£o\nif(appState==='intro'){return/*#__PURE__*/_jsxs(\"div\",{className:\"intro-screen\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"intro-logo \".concat(introStep>=1?'animate':''),children:/*#__PURE__*/_jsx(\"img\",{src:\"/assets/glasses-logo.png\",alt:\"Castrilha\",className:\"glasses-image\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"intro-title \".concat(introStep>=2?'animate':''),children:/*#__PURE__*/_jsx(\"img\",{src:\"/assets/nomepx.png\",alt:\"Castrilha\",className:\"title-image\"})}),showLocationRequest&&/*#__PURE__*/_jsxs(\"div\",{className:\"location-request\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Permitir acesso \\xE0 localiza\\xE7\\xE3o?\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Precisamos da sua localiza\\xE7\\xE3o para fornecer navega\\xE7\\xE3o precisa.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:requestLocation,children:\"Permitir Localiza\\xE7\\xE3o\"})]})]});}// Tela principal\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"logo-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/assets/glasses-logo-small.png\",alt:\"Castrilha\",className:\"glasses-logo-image\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"app-title\",children:\"Castrilha\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-controls\",children:[/*#__PURE__*/_jsx(OfflineStatus,{className:\"header-offline-status\"}),/*#__PURE__*/_jsx(SoundControls,{className:\"header-sound-controls\"})]})]}),!isOnline&&/*#__PURE__*/_jsx(\"div\",{className:\"offline-banner\",children:/*#__PURE__*/_jsx(\"p\",{children:\"MODO OFFLINE ATIVO\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bluetooth-controls\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDD35 Conex\\xE3o Bluetooth\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bluetooth-status\",children:isBluetoothConnected?/*#__PURE__*/_jsxs(\"div\",{className:\"connected-status\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-indicator connected\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Conectado: \",bluetoothDevice===null||bluetoothDevice===void 0?void 0:bluetoothDevice.name]}),/*#__PURE__*/_jsx(\"button\",{className:\"button disconnect-btn\",onClick:disconnectBluetooth,children:\"Desconectar\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"disconnected-status\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-indicator disconnected\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Desconectado\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button connect-btn\",onClick:connectToESP32,disabled:isConnectingBluetooth,children:isConnectingBluetooth?'Conectando...':'Conectar ESP32'})]})}),!isBluetoothSupported()&&/*#__PURE__*/_jsx(\"div\",{className:\"bluetooth-warning\",children:\"\\u26A0\\uFE0F Seu navegador n\\xE3o suporta Web Bluetooth. Use Chrome ou Edge.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Navega\\xE7\\xE3o Ponto a Ponto\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(Autocomplete,{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Destino\",ref:destinationRef,disabled:!isOnline})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:calculateRoute,disabled:!isOnline,children:\"Obter Rota\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:saveCurrentRoute,disabled:!isOnline,children:\"Salvar Rota Atual\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"navigation-controls\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Controle de Navega\\xE7\\xE3o\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[!isNavigating?/*#__PURE__*/_jsx(\"button\",{onClick:startNavigation,className:\"button start-nav-btn\",disabled:!directionsResponse,children:\"Iniciar Navega\\xE7\\xE3o\"}):/*#__PURE__*/_jsx(\"button\",{onClick:stopNavigation,className:\"button stop-nav-btn\",children:\"Parar Navega\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"button\",{onClick:forceNextInstruction,className:\"button\",disabled:!isNavigating,children:\"Pr\\xF3xima Instru\\xE7\\xE3o (Teste)\"})]}),isNavigating&&/*#__PURE__*/_jsxs(\"p\",{className:\"nav-status\",children:[\"Navega\\xE7\\xE3o em curso... Pr\\xF3ximo passo: \",currentStepIndex+1]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"saved-routes-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Rotas Salvas\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"route-list\",children:savedRoutes.length>0?savedRoutes.map((route,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"route-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:route.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"route-item-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadSavedRoute(route),children:\"Carregar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteSavedRoute(index),className:\"delete-btn\",children:\"X\"})]})]},index)):/*#__PURE__*/_jsx(\"p\",{children:\"Nenhuma rota salva.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"instructions-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Instru\\xE7\\xF5es\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"instructions-list\",children:simplifiedInstructions.map((inst,index)=>/*#__PURE__*/_jsx(\"li\",{className:index===currentStepIndex-1?'current-instruction':'',children:inst},index))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:isOnline?/*#__PURE__*/_jsxs(GoogleMap,{mapContainerStyle:containerStyle,center:currentPosition||{lat:-23.55052,lng:-46.633308},zoom:15,onLoad:setMap,options:{mapTypeControl:false,streetViewControl:false,fullscreenControl:false},children:[directionsResponse&&/*#__PURE__*/_jsx(DirectionsRenderer,{directions:directionsResponse}),currentPosition&&/*#__PURE__*/_jsx(Marker,{position:currentPosition})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"offline-map-placeholder\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Mapa indispon\\xEDvel em modo offline\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Use as rotas salvas para navegar. A sua localiza\\xE7\\xE3o continua sendo rastreada.\"})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","GoogleMap","useJsApiLoader","Marker","Autocomplete","DirectionsRenderer","useSounds","useOffline","SoundControls","OfflineStatus","jsx","_jsx","jsxs","_jsxs","GOOGLE_MAPS_API_KEY","ESP32_DEVICE_NAME","ESP32_SERVICE_UUID","ESP32_CHARACTERISTIC_UUID","containerStyle","width","height","NAVIGATION_TRIGGER_DISTANCE_METERS","libraries","App","isLoaded","id","googleMapsApiKey","appState","setAppState","introStep","setIntroStep","showLocationRequest","setShowLocationRequest","map","setMap","directionsResponse","setDirectionsResponse","currentPosition","setCurrentPosition","simplifiedInstructions","setSimplifiedInstructions","isNavigating","setIsNavigating","currentStepIndex","setCurrentStepIndex","savedRoutes","setSavedRoutes","locationWatcherId","isBluetoothConnected","setIsBluetoothConnected","bluetoothDevice","setBluetoothDevice","bluetoothCharacteristic","setBluetoothCharacteristic","isConnectingBluetooth","setIsConnectingBluetooth","destinationRef","playSound","playHoverSound","preloadSounds","timer","setTimeout","clearTimeout","isOnline","registerServiceWorker","saveOfflineData","getOfflineData","sendNotification","isBluetoothSupported","navigator","connectToESP32","bluetooth","alert","_device$gatt","device","requestDevice","filters","name","namePrefix","optionalServices","console","log","server","gatt","connect","Error","service","getPrimaryService","characteristic","getCharacteristic","startNotifications","addEventListener","event","target","value","decoder","TextDecoder","message","decode","error","concat","disconnectBluetooth","_bluetoothDevice$gatt","connected","disconnect","sendInstructionViaBluetooth","instruction","encoder","TextEncoder","data","encode","writeValue","sendSingleInstructionToESP32","requestLocation","geolocation","getCurrentPosition","position","pos","lat","coords","latitude","lng","longitude","routesFromStorage","localStorage","getItem","JSON","parse","getDistanceInMeters","pos1","pos2","R","p1","Math","PI","p2","deltaP","deltaL","a","sin","cos","c","atan2","sqrt","calculateRoute","_destinationRef$curre","current","directionsService","google","maps","DirectionsService","results","route","origin","destination","travelMode","TravelMode","DRIVING","language","generateSimplifiedInstructions","directions","routes","length","legs","instructions","steps","step","_step$distance","cleanInstruction","replace","distance","text","saveCurrentRoute","_destinationRef$curre2","routeName","some","window","confirm","newRoute","updatedRoutes","filter","push","setItem","stringify","loadSavedRoute","routeToLoad","deleteSavedRoute","indexToDelete","_","index","stopNavigation","clearWatch","advanceToStep","stepIndex","instructionText","prevIndex","handleLocationUpdate","userPosition","nextStep","nextStepLocation","startLocation","start_location","handleLocationError","watchPosition","enableHighAccuracy","timeout","maximumAge","startNavigation","forceNextInstruction","className","children","src","alt","onClick","disabled","type","placeholder","ref","inst","mapContainerStyle","center","zoom","onLoad","options","mapTypeControl","streetViewControl","fullscreenControl"],"sources":["C:/esp32-navigation-app/mobile-app/src/App.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { GoogleMap, useJsApiLoader, Marker, Autocomplete, DirectionsRenderer } from '@react-google-maps/api';\nimport { useSounds } from './hooks/useSounds';\nimport { useOffline } from './hooks/useOffline';\nimport { SoundControls } from './components/SoundControls';\nimport { OfflineStatus } from './components/OfflineStatus';\n\n// Defini√ß√µes de tipos para Web Bluetooth API\ndeclare global {\n  interface Navigator {\n    bluetooth?: Bluetooth;\n  }\n  \n  interface Bluetooth {\n    requestDevice(options: RequestDeviceOptions): Promise<BluetoothDevice>;\n  }\n  \n  interface RequestDeviceOptions {\n    filters?: BluetoothLEScanFilter[];\n    optionalServices?: string[];\n  }\n  \n  interface BluetoothLEScanFilter {\n    name?: string;\n    namePrefix?: string;\n    services?: string[];\n  }\n  \n  interface BluetoothDevice {\n    id: string;\n    name?: string;\n    gatt?: BluetoothRemoteGATTServer;\n  }\n  \n  interface BluetoothRemoteGATTServer {\n    connect(): Promise<BluetoothRemoteGATTServer>;\n    getPrimaryService(service: string): Promise<BluetoothRemoteGATTService>;\n    connected: boolean;\n    disconnect(): void;\n  }\n  \n  interface BluetoothRemoteGATTService {\n    getCharacteristic(characteristic: string): Promise<BluetoothRemoteGATTCharacteristic>;\n  }\n  \n  interface BluetoothRemoteGATTCharacteristic {\n    writeValue(value: BufferSource): Promise<void>;\n    startNotifications(): Promise<BluetoothRemoteGATTCharacteristic>;\n    addEventListener(type: string, listener: EventListener): void;\n    value?: DataView;\n  }\n}\n\n// ##################################################################\n// # COLOQUE SUAS CHAVES AQUI                                       #\n// ##################################################################\n\n// 1. CHAVE DA API GOOGLE MAPS PLATFORM\n//    Ative as APIs: \"Maps JavaScript API\", \"Directions API\", \"Places API\"\n//    Instru√ß√µes: https://developers.google.com/maps/gmp-get-started\nconst GOOGLE_MAPS_API_KEY = \"AIzaSyAVEzH5bvFPDpgjQtnA4s2TKfjEW_0OTLY\";\n\n// 2. CONFIGURA√á√ïES BLUETOOTH\n//    Nome do dispositivo ESP32 que aparecer√° na lista de dispositivos Bluetooth\nconst ESP32_DEVICE_NAME = \"ESP32_Navigation\"; // Altere para o nome do seu ESP32\nconst ESP32_SERVICE_UUID = \"0000ffe0-0000-1000-8000-00805f9b34fb\"; // UUID do servi√ßo\nconst ESP32_CHARACTERISTIC_UUID = \"0000ffe1-0000-1000-8000-00805f9b34fb\"; // UUID da caracter√≠stica\n\n// ##################################################################\n\n// Interface para a estrutura da rota salva\ninterface SavedRoute {\n  name: string;\n  directions: google.maps.DirectionsResult;\n}\n\n// Interface para dispositivo Bluetooth\ninterface BluetoothDevice {\n  id: string;\n  name: string;\n  gatt?: BluetoothRemoteGATTServer;\n}\n\n// Estados da aplica√ß√£o\ntype AppState = 'loading' | 'intro' | 'main';\n\nconst containerStyle = {\n  width: '100%',\n  height: '100%'\n};\n\n// Adicionando uma constante para a dist√¢ncia de gatilho\nconst NAVIGATION_TRIGGER_DISTANCE_METERS = 50; // Dispara o envio da instru√ß√£o a 50 metros\n\nconst libraries: \"places\"[] = [\"places\"];\n\nfunction App() {\n  const { isLoaded } = useJsApiLoader({\n    id: 'google-map-script',\n    googleMapsApiKey: GOOGLE_MAPS_API_KEY,\n    libraries,\n  });\n\n  // Estados da aplica√ß√£o\n  const [appState, setAppState] = useState<AppState>('loading');\n  const [introStep, setIntroStep] = useState(0);\n  const [showLocationRequest, setShowLocationRequest] = useState(false);\n\n  const [map, setMap] = useState<google.maps.Map | null>(null);\n  const [directionsResponse, setDirectionsResponse] = useState<google.maps.DirectionsResult | null>(null);\n  const [currentPosition, setCurrentPosition] = useState<google.maps.LatLngLiteral | null>(null);\n  const [simplifiedInstructions, setSimplifiedInstructions] = useState<string[]>([]);\n  \n  // Novos estados para gerenciar a navega√ß√£o e rotas salvas\n  const [isNavigating, setIsNavigating] = useState(false);\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\n  const [savedRoutes, setSavedRoutes] = useState<SavedRoute[]>([]);\n  const locationWatcherId = useRef<number | null>(null);\n  \n  // Estados para Bluetooth\n  const [isBluetoothConnected, setIsBluetoothConnected] = useState(false);\n  const [bluetoothDevice, setBluetoothDevice] = useState<BluetoothDevice | null>(null);\n  const [bluetoothCharacteristic, setBluetoothCharacteristic] = useState<BluetoothRemoteGATTCharacteristic | null>(null);\n  const [isConnectingBluetooth, setIsConnectingBluetooth] = useState(false);\n  \n  const destinationRef = useRef<HTMLInputElement>(null);\n\n  // Sistema de sons\n  const { playSound, playHoverSound, preloadSounds } = useSounds();\n\n  // Anima√ß√£o de entrada\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setAppState('intro');\n    }, 2000);\n\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Sequ√™ncia de anima√ß√£o do intro\n  useEffect(() => {\n    if (appState === 'intro') {\n      const timer = setTimeout(() => {\n        setIntroStep(1);\n      }, 1000);\n\n      return () => clearTimeout(timer);\n    }\n  }, [appState]);\n\n  useEffect(() => {\n    if (introStep === 1) {\n      const timer = setTimeout(() => {\n        setIntroStep(2);\n      }, 1500);\n\n      return () => clearTimeout(timer);\n    }\n  }, [introStep]);\n\n  useEffect(() => {\n    if (introStep === 2) {\n      const timer = setTimeout(() => {\n        setShowLocationRequest(true);\n      }, 1000);\n\n      return () => clearTimeout(timer);\n    }\n  }, [introStep]);\n\n  // Sistema offline\n  const { \n    isOnline, \n    registerServiceWorker, \n    saveOfflineData, \n    getOfflineData,\n    sendNotification \n  } = useOffline();\n\n  // Verificar se o navegador suporta Web Bluetooth\n  const isBluetoothSupported = () => {\n    return 'bluetooth' in navigator;\n  };\n\n  // Fun√ß√£o para conectar ao ESP32 via Bluetooth\n  const connectToESP32 = async () => {\n    playSound('click');\n    if (!isBluetoothSupported() || !navigator.bluetooth) {\n      alert(\"Seu navegador n√£o suporta Web Bluetooth. Use Chrome ou Edge.\");\n      playSound('error');\n      return;\n    }\n\n    setIsConnectingBluetooth(true);\n    \n    try {\n      // Solicitar dispositivo Bluetooth\n      const device = await navigator.bluetooth.requestDevice({\n        filters: [\n          {\n            name: ESP32_DEVICE_NAME\n          },\n          {\n            namePrefix: \"ESP32\"\n          }\n        ],\n        optionalServices: [ESP32_SERVICE_UUID]\n      });\n\n      console.log(\"Dispositivo selecionado:\", device.name);\n\n      // Conectar ao GATT Server\n      const server = await device.gatt?.connect();\n      if (!server) {\n        throw new Error(\"N√£o foi poss√≠vel conectar ao servidor GATT\");\n      }\n\n      // Obter o servi√ßo\n      const service = await server.getPrimaryService(ESP32_SERVICE_UUID);\n      \n      // Obter a caracter√≠stica para escrita\n      const characteristic = await service.getCharacteristic(ESP32_CHARACTERISTIC_UUID);\n      \n      // Habilitar notifica√ß√µes se dispon√≠vel\n      try {\n        await characteristic.startNotifications();\n        characteristic.addEventListener('characteristicvaluechanged', (event) => {\n          const target = event.target as unknown as BluetoothRemoteGATTCharacteristic;\n          const value = target.value;\n          if (value) {\n            const decoder = new TextDecoder();\n            const message = decoder.decode(value);\n            console.log(\"Mensagem recebida do ESP32:\", message);\n          }\n        });\n      } catch (error) {\n        console.log(\"Notifica√ß√µes n√£o dispon√≠veis, apenas escrita\");\n      }\n\n      setBluetoothDevice({\n        id: device.id,\n        name: device.name || ESP32_DEVICE_NAME,\n        gatt: server\n      });\n      setBluetoothCharacteristic(characteristic);\n      setIsBluetoothConnected(true);\n      \n      console.log(\"Conectado ao ESP32 via Bluetooth!\");\n      alert(\"Conectado ao ESP32 via Bluetooth!\");\n      playSound('connect');\n      \n    } catch (error) {\n      console.error(\"Erro ao conectar Bluetooth:\", error);\n      if (error instanceof Error) {\n        if (error.name === 'NotFoundError') {\n          alert(\"ESP32 n√£o encontrado. Verifique se est√° ligado e vis√≠vel.\");\n        } else if (error.name === 'NotAllowedError') {\n          alert(\"Permiss√£o negada para Bluetooth.\");\n        } else {\n          alert(`Erro de conex√£o: ${error.message}`);\n        }\n      } else {\n        alert(\"Erro desconhecido ao conectar Bluetooth.\");\n        playSound('error');\n      }\n    } finally {\n      setIsConnectingBluetooth(false);\n    }\n  };\n\n  // Fun√ß√£o para desconectar Bluetooth\n  const disconnectBluetooth = async () => {\n    playSound('click');\n    if (bluetoothDevice?.gatt?.connected) {\n      await bluetoothDevice.gatt.disconnect();\n    }\n    setBluetoothDevice(null);\n    setBluetoothCharacteristic(null);\n    setIsBluetoothConnected(false);\n    console.log(\"Desconectado do ESP32\");\n    playSound('disconnect');\n  };\n\n  // Fun√ß√£o para enviar instru√ß√£o via Bluetooth\n  const sendInstructionViaBluetooth = useCallback(async (instruction: string) => {\n    if (!bluetoothCharacteristic || !isBluetoothConnected) {\n      console.error(\"Bluetooth n√£o conectado\");\n      return;\n    }\n\n    try {\n      const encoder = new TextEncoder();\n      const data = encoder.encode(instruction + '\\n'); // Adiciona quebra de linha\n      \n      await bluetoothCharacteristic.writeValue(data);\n      console.log(`Instru√ß√£o enviada via Bluetooth: ${instruction}`);\n    } catch (error) {\n      console.error(\"Erro ao enviar via Bluetooth:\", error);\n      alert(\"Erro ao enviar instru√ß√£o via Bluetooth. Verifique a conex√£o.\");\n    }\n  }, [bluetoothCharacteristic, isBluetoothConnected]);\n\n  // Fun√ß√£o para enviar instru√ß√£o (agora usa Bluetooth em vez de HTTP)\n  const sendSingleInstructionToESP32 = useCallback(async (instruction: string) => {\n    if (isBluetoothConnected) {\n      await sendInstructionViaBluetooth(instruction);\n    } else {\n      console.log(\"Bluetooth n√£o conectado. Instru√ß√£o n√£o enviada.\");\n      alert(\"Conecte ao ESP32 via Bluetooth primeiro.\");\n    }\n  }, [isBluetoothConnected, sendInstructionViaBluetooth]);\n\n  // Solicitar localiza√ß√£o\n  const requestLocation = () => {\n    playSound('click');\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const pos = {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          };\n          setCurrentPosition(pos);\n          setShowLocationRequest(false);\n          setAppState('main');\n          playSound('success');\n        },\n        () => {\n          alert(\"Erro: O servi√ßo de geolocaliza√ß√£o falhou.\");\n          playSound('error');\n        }\n      );\n    } else {\n      alert(\"Erro: Seu navegador n√£o suporta geolocaliza√ß√£o.\");\n      playSound('error');\n    }\n  };\n\n  // O hook useOffline j√° monitora o status online/offline automaticamente\n\n  // Efeito para carregar as rotas salvas do localStorage ao iniciar\n  useEffect(() => {\n    try {\n      const routesFromStorage = localStorage.getItem('savedNavigationRoutes');\n      if (routesFromStorage) {\n        setSavedRoutes(JSON.parse(routesFromStorage));\n      }\n    } catch (error) {\n      console.error(\"Erro ao carregar rotas do localStorage:\", error);\n    }\n  }, []);\n\n  // Pr√©-carregar sons quando a aplica√ß√£o inicia\n  useEffect(() => {\n    preloadSounds();\n  }, [preloadSounds]);\n\n  // Registrar service worker para funcionalidade offline\n  useEffect(() => {\n    registerServiceWorker();\n  }, [registerServiceWorker]);\n\n  // Nova fun√ß√£o para calcular a dist√¢ncia entre dois pontos de GPS (f√≥rmula de Haversine)\n  const getDistanceInMeters = useCallback((pos1: google.maps.LatLngLiteral, pos2: google.maps.LatLngLiteral) => {\n    const R = 6371e3; // Metros\n    const p1 = (pos1.lat * Math.PI) / 180;\n    const p2 = (pos2.lat * Math.PI) / 180;\n    const deltaP = ((pos2.lat - pos1.lat) * Math.PI) / 180;\n    const deltaL = ((pos2.lng - pos1.lng) * Math.PI) / 180;\n    const a =\n      Math.sin(deltaP / 2) * Math.sin(deltaP / 2) +\n      Math.cos(p1) * Math.cos(p2) * Math.sin(deltaL / 2) * Math.sin(deltaL / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c; // em metros\n  }, []);\n\n  const calculateRoute = async () => {\n    playSound('click');\n    if (!isOnline) {\n      alert(\"Funcionalidade indispon√≠vel offline. Carregue uma rota salva.\");\n      playSound('error');\n      return;\n    }\n    if (!destinationRef.current?.value || !currentPosition) {\n      playSound('error');\n      return;\n    }\n    \n    const directionsService = new google.maps.DirectionsService();\n    const results = await directionsService.route({\n      origin: currentPosition,\n      destination: destinationRef.current.value,\n      travelMode: google.maps.TravelMode.DRIVING,\n      language: 'pt-BR', // Instru√ß√µes em Portugu√™s\n    });\n\n    setDirectionsResponse(results);\n    generateSimplifiedInstructions(results);\n    playSound('success');\n  };\n  \n  const generateSimplifiedInstructions = (directions: google.maps.DirectionsResult) => {\n    if (!directions.routes || directions.routes.length === 0) {\n      return;\n    }\n    const route = directions.routes[0].legs[0];\n    const instructions = route.steps.map((step: google.maps.DirectionsStep) => {\n      // Remove tags HTML da instru√ß√£o (ex: <b>, <div>)\n      const cleanInstruction = step.instructions.replace(/<[^>]*>/g, '');\n      const distance = step.distance?.text || '';\n      return `${cleanInstruction} (${distance})`;\n    });\n    setSimplifiedInstructions(instructions);\n  };\n\n  // Fun√ß√µes para gerenciar rotas salvas\n  const saveCurrentRoute = () => {\n    if (!isOnline) {\n      alert(\"Funcionalidade indispon√≠vel offline.\");\n      return;\n    }\n    if (!directionsResponse || !destinationRef.current?.value) {\n      alert(\"Nenhuma rota calculada para salvar.\");\n      return;\n    }\n\n    const routeName = destinationRef.current.value;\n\n    if (savedRoutes.some(route => route.name === routeName)) {\n      if (!window.confirm(`Uma rota para \"${routeName}\" j√° existe. Deseja substitu√≠-la?`)) {\n        return;\n      }\n    }\n\n    const newRoute: SavedRoute = { name: routeName, directions: directionsResponse };\n    const updatedRoutes = savedRoutes.filter(route => route.name !== routeName);\n    updatedRoutes.push(newRoute);\n\n    setSavedRoutes(updatedRoutes);\n    localStorage.setItem('savedNavigationRoutes', JSON.stringify(updatedRoutes));\n    alert(`Rota para \"${routeName}\" salva com sucesso!`);\n  };\n\n  const loadSavedRoute = (routeToLoad: SavedRoute) => {\n    setDirectionsResponse(routeToLoad.directions);\n    generateSimplifiedInstructions(routeToLoad.directions);\n    setIsNavigating(false);\n    if (destinationRef.current) {\n        destinationRef.current.value = routeToLoad.name;\n    }\n    alert(`Rota para \"${routeToLoad.name}\" carregada.`);\n  };\n\n  const deleteSavedRoute = (indexToDelete: number) => {\n    if (window.confirm(\"Tem certeza que deseja deletar esta rota?\")) {\n      const updatedRoutes = savedRoutes.filter((_, index) => index !== indexToDelete);\n      setSavedRoutes(updatedRoutes);\n      localStorage.setItem('savedNavigationRoutes', JSON.stringify(updatedRoutes));\n    }\n  };\n\n  const stopNavigation = () => {\n    playSound('click');\n    if (locationWatcherId.current !== null) {\n      navigator.geolocation.clearWatch(locationWatcherId.current);\n      locationWatcherId.current = null;\n    }\n    setIsNavigating(false);\n    alert(\"Navega√ß√£o encerrada.\");\n    playSound('notification');\n  };\n\n  const advanceToStep = useCallback((stepIndex: number) => {\n    if (!directionsResponse) return;\n    const route = directionsResponse.routes[0].legs[0];\n    if (stepIndex >= route.steps.length) {\n      sendSingleInstructionToESP32(\"Voc√™ chegou ao seu destino!\");\n      stopNavigation();\n      playSound('success');\n      return;\n    }\n    const step = route.steps[stepIndex];\n    const instructionText = step.instructions.replace(/<[^>]*>/g, '');\n    sendSingleInstructionToESP32(instructionText);\n    setCurrentStepIndex(prevIndex => prevIndex + 1);\n    playSound('instruction');\n  }, [directionsResponse, sendSingleInstructionToESP32]);\n\n  const handleLocationUpdate = useCallback((position: GeolocationPosition) => {\n    if (!directionsResponse?.routes[0]) return;\n    const userPosition: google.maps.LatLngLiteral = {\n      lat: position.coords.latitude,\n      lng: position.coords.longitude,\n    };\n    setCurrentPosition(userPosition);\n    const route = directionsResponse.routes[0].legs[0];\n    if (currentStepIndex >= route.steps.length) {\n      advanceToStep(currentStepIndex); // Para enviar a mensagem final\n      return;\n    }\n    const nextStep = route.steps[currentStepIndex];\n    \n    let nextStepLocation: google.maps.LatLngLiteral;\n    const startLocation = nextStep.start_location;\n\n    if (typeof startLocation.lat === 'function') {\n      nextStepLocation = { lat: startLocation.lat(), lng: startLocation.lng() };\n    } else {\n      nextStepLocation = startLocation as unknown as google.maps.LatLngLiteral;\n    }\n\n    const distance = getDistanceInMeters(userPosition, nextStepLocation);\n    if (distance < NAVIGATION_TRIGGER_DISTANCE_METERS) {\n      advanceToStep(currentStepIndex);\n    }\n  }, [directionsResponse, currentStepIndex, advanceToStep, getDistanceInMeters]);\n\n  const handleLocationError = useCallback((error: GeolocationPositionError) => {\n    alert(`Erro de geolocaliza√ß√£o: ${error.message}`);\n    stopNavigation();\n  }, []);\n  \n  // Este useEffect √© o c√©rebro da navega√ß√£o em tempo real\n  useEffect(() => {\n    if (!isNavigating) {\n        return;\n    }\n\n    locationWatcherId.current = navigator.geolocation.watchPosition(\n      handleLocationUpdate, \n      handleLocationError,\n      { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }\n    );\n\n    return () => {\n      if (locationWatcherId.current !== null) {\n        navigator.geolocation.clearWatch(locationWatcherId.current);\n      }\n    };\n  }, [isNavigating, handleLocationUpdate, handleLocationError]);\n\n  const startNavigation = () => {\n    playSound('click');\n    if (!directionsResponse) {\n      alert(\"Carregue uma rota primeiro.\");\n      playSound('error');\n      return;\n    }\n    stopNavigation(); // Garante que qualquer watch anterior seja limpo\n    setCurrentStepIndex(0);\n    setIsNavigating(true);\n    alert(\"Iniciando a navega√ß√£o!\");\n    playSound('navigation');\n  };\n  \n  const forceNextInstruction = () => {\n      if (!isNavigating) {\n          alert(\"A navega√ß√£o n√£o est√° ativa.\");\n          return;\n      }\n      advanceToStep(currentStepIndex);\n  };\n\n  if (!isLoaded) return <div className=\"loading-screen\">Carregando...</div>;\n\n  // Tela de carregamento\n  if (appState === 'loading') {\n    return (\n      <div className=\"loading-screen\">\n        <div className=\"loading-logo\">\n          <img src=\"/assets/glasses-logo.png\" alt=\"Castrilha\" className=\"glasses-image\" />\n        </div>\n        <div className=\"loading-text\">Castrilha</div>\n      </div>\n    );\n  }\n\n  // Tela de introdu√ß√£o\n  if (appState === 'intro') {\n    return (\n      <div className=\"intro-screen\">\n        <div className={`intro-logo ${introStep >= 1 ? 'animate' : ''}`}>\n          <img src=\"/assets/glasses-logo.png\" alt=\"Castrilha\" className=\"glasses-image\" />\n        </div>\n        <div className={`intro-title ${introStep >= 2 ? 'animate' : ''}`}>\n          <img src=\"/assets/nomepx.png\" alt=\"Castrilha\" className=\"title-image\" />\n        </div>\n        {showLocationRequest && (\n          <div className=\"location-request\">\n            <h3>Permitir acesso √† localiza√ß√£o?</h3>\n            <p>Precisamos da sua localiza√ß√£o para fornecer navega√ß√£o precisa.</p>\n            <button className=\"btn-primary\" onClick={requestLocation}>\n              Permitir Localiza√ß√£o\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  // Tela principal\n  return (\n    <div className='app-container'>\n      <div className='sidebar'>\n        <div className='header'>\n          <div className='logo-container'>\n            <img src=\"/assets/glasses-logo-small.png\" alt=\"Castrilha\" className=\"glasses-logo-image\" />\n            <h1 className='app-title'>Castrilha</h1>\n          </div>\n          <div className=\"header-controls\">\n            <OfflineStatus className=\"header-offline-status\" />\n            <SoundControls className=\"header-sound-controls\" />\n          </div>\n        </div>\n        \n        {!isOnline && (\n          <div className='offline-banner'>\n            <p>MODO OFFLINE ATIVO</p>\n          </div>\n        )}\n\n        <div className='bluetooth-controls'>\n          <h3>üîµ Conex√£o Bluetooth</h3>\n          <div className='bluetooth-status'>\n            {isBluetoothConnected ? (\n              <div className='connected-status'>\n                <span className='status-indicator connected'></span>\n                <span>Conectado: {bluetoothDevice?.name}</span>\n                <button \n                  className='button disconnect-btn' \n                  onClick={disconnectBluetooth}\n                >\n                  Desconectar\n                </button>\n              </div>\n            ) : (\n              <div className='disconnected-status'>\n                <span className='status-indicator disconnected'></span>\n                <span>Desconectado</span>\n                <button \n                  className='button connect-btn' \n                  onClick={connectToESP32}\n                  disabled={isConnectingBluetooth}\n                >\n                  {isConnectingBluetooth ? 'Conectando...' : 'Conectar ESP32'}\n                </button>\n              </div>\n            )}\n          </div>\n          {!isBluetoothSupported() && (\n            <div className='bluetooth-warning'>\n              ‚ö†Ô∏è Seu navegador n√£o suporta Web Bluetooth. Use Chrome ou Edge.\n            </div>\n          )}\n        </div>\n\n        <div className='controls-container'>\n          <h2>Navega√ß√£o Ponto a Ponto</h2>\n          <div className='input-group'>\n            <Autocomplete>\n              <input \n                type='text' \n                placeholder='Destino' \n                ref={destinationRef}\n                disabled={!isOnline}\n              />\n            </Autocomplete>\n          </div>\n          <div className='button-group'>\n            <button \n              className='button' \n              onClick={calculateRoute}\n              disabled={!isOnline}\n            >\n              Obter Rota\n            </button>\n            <button \n              className='button' \n              onClick={saveCurrentRoute}\n              disabled={!isOnline}\n            >\n              Salvar Rota Atual\n            </button>\n          </div>\n        </div>\n\n        <div className='navigation-controls'>\n          <h3>Controle de Navega√ß√£o</h3>\n          <div className='button-group'>\n            {!isNavigating ? (\n                <button onClick={startNavigation} className='button start-nav-btn' disabled={!directionsResponse}>\n                    Iniciar Navega√ß√£o\n                </button>\n            ) : (\n                <button onClick={stopNavigation} className='button stop-nav-btn'>\n                    Parar Navega√ß√£o\n                </button>\n            )}\n            <button onClick={forceNextInstruction} className='button' disabled={!isNavigating}>\n                Pr√≥xima Instru√ß√£o (Teste)\n            </button>\n          </div>\n          {isNavigating && (\n              <p className='nav-status'>Navega√ß√£o em curso... Pr√≥ximo passo: {currentStepIndex + 1}</p>\n          )}\n        </div>\n\n        <div className='saved-routes-container'>\n          <h3>Rotas Salvas</h3>\n          <ul className='route-list'>\n            {savedRoutes.length > 0 ? (\n              savedRoutes.map((route, index) => (\n                <li key={index} className='route-item'>\n                  <span>{route.name}</span>\n                  <div className='route-item-buttons'>\n                    <button onClick={() => loadSavedRoute(route)}>Carregar</button>\n                    <button onClick={() => deleteSavedRoute(index)} className='delete-btn'>X</button>\n                  </div>\n                </li>\n              ))\n            ) : (\n              <p>Nenhuma rota salva.</p>\n            )}\n          </ul>\n        </div>\n\n        <div className='instructions-container'>\n            <h3>Instru√ß√µes</h3>\n            <ul className='instructions-list'>\n                {simplifiedInstructions.map((inst, index) => (\n                    <li key={index} className={index === currentStepIndex -1 ? 'current-instruction' : ''}>\n                        {inst}\n                    </li>\n                ))}\n            </ul>\n        </div>\n      </div>\n\n      <div className='map-container'>\n        {isOnline ? (\n          <GoogleMap\n            mapContainerStyle={containerStyle}\n            center={currentPosition || { lat: -23.55052, lng: -46.633308 }}\n            zoom={15}\n            onLoad={setMap}\n            options={{\n              mapTypeControl: false,\n              streetViewControl: false,\n              fullscreenControl: false,\n            }}\n          >\n            {directionsResponse && <DirectionsRenderer directions={directionsResponse} />}\n            {currentPosition && <Marker position={currentPosition} />}\n          </GoogleMap>\n        ) : (\n          <div className='offline-map-placeholder'>\n            <h2>Mapa indispon√≠vel em modo offline</h2>\n            <p>Use as rotas salvas para navegar. A sua localiza√ß√£o continua sendo rastreada.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}