{"ast":null,"code":"import React,{useState,useRef,useEffect,useCallback}from'react';import{GoogleMap,useJsApiLoader,Marker,Autocomplete,DirectionsRenderer}from'@react-google-maps/api';// Defini√ß√µes de tipos para Web Bluetooth API\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// ##################################################################\n// # COLOQUE SUAS CHAVES AQUI                                       #\n// ##################################################################\n// 1. CHAVE DA API GOOGLE MAPS PLATFORM\n//    Ative as APIs: \"Maps JavaScript API\", \"Directions API\", \"Places API\"\n//    Instru√ß√µes: https://developers.google.com/maps/gmp-get-started\nconst GOOGLE_MAPS_API_KEY=\"AIzaSyAVEzH5bvFPDpgjQtnA4s2TKfjEW_0OTLY\";// 2. CONFIGURA√á√ïES BLUETOOTH\n//    Nome do dispositivo ESP32 que aparecer√° na lista de dispositivos Bluetooth\nconst ESP32_DEVICE_NAME=\"ESP32_Navigation\";// Altere para o nome do seu ESP32\nconst ESP32_SERVICE_UUID=\"0000ffe0-0000-1000-8000-00805f9b34fb\";// UUID do servi√ßo\nconst ESP32_CHARACTERISTIC_UUID=\"0000ffe1-0000-1000-8000-00805f9b34fb\";// UUID da caracter√≠stica\n// ##################################################################\n// Interface para a estrutura da rota salva\n// Interface para dispositivo Bluetooth\n// Estados da aplica√ß√£o\nconst containerStyle={width:'100%',height:'100%'};// Adicionando uma constante para a dist√¢ncia de gatilho\nconst NAVIGATION_TRIGGER_DISTANCE_METERS=50;// Dispara o envio da instru√ß√£o a 50 metros\nconst libraries=[\"places\"];function App(){const{isLoaded}=useJsApiLoader({id:'google-map-script',googleMapsApiKey:GOOGLE_MAPS_API_KEY,libraries});// Estados da aplica√ß√£o\nconst[appState,setAppState]=useState('loading');const[introStep,setIntroStep]=useState(0);const[showLocationRequest,setShowLocationRequest]=useState(false);const[map,setMap]=useState(null);const[directionsResponse,setDirectionsResponse]=useState(null);const[currentPosition,setCurrentPosition]=useState(null);const[simplifiedInstructions,setSimplifiedInstructions]=useState([]);// Novos estados para gerenciar a navega√ß√£o e rotas salvas\nconst[isNavigating,setIsNavigating]=useState(false);const[currentStepIndex,setCurrentStepIndex]=useState(0);const[savedRoutes,setSavedRoutes]=useState([]);const locationWatcherId=useRef(null);// Novo estado para o modo offline\nconst[isOnline,setIsOnline]=useState(navigator.onLine);// Estados para Bluetooth\nconst[isBluetoothConnected,setIsBluetoothConnected]=useState(false);const[bluetoothDevice,setBluetoothDevice]=useState(null);const[bluetoothCharacteristic,setBluetoothCharacteristic]=useState(null);const[isConnectingBluetooth,setIsConnectingBluetooth]=useState(false);const destinationRef=useRef(null);// Anima√ß√£o de entrada\nuseEffect(()=>{const timer=setTimeout(()=>{setAppState('intro');},2000);return()=>clearTimeout(timer);},[]);// Sequ√™ncia de anima√ß√£o do intro\nuseEffect(()=>{if(appState==='intro'){const timer=setTimeout(()=>{setIntroStep(1);},1000);return()=>clearTimeout(timer);}},[appState]);useEffect(()=>{if(introStep===1){const timer=setTimeout(()=>{setIntroStep(2);},1500);return()=>clearTimeout(timer);}},[introStep]);useEffect(()=>{if(introStep===2){const timer=setTimeout(()=>{setShowLocationRequest(true);},1000);return()=>clearTimeout(timer);}},[introStep]);// Verificar se o navegador suporta Web Bluetooth\nconst isBluetoothSupported=()=>{return'bluetooth'in navigator;};// Fun√ß√£o para conectar ao ESP32 via Bluetooth\nconst connectToESP32=async()=>{if(!isBluetoothSupported()||!navigator.bluetooth){alert(\"Seu navegador n√£o suporta Web Bluetooth. Use Chrome ou Edge.\");return;}setIsConnectingBluetooth(true);try{var _device$gatt;// Solicitar dispositivo Bluetooth\nconst device=await navigator.bluetooth.requestDevice({filters:[{name:ESP32_DEVICE_NAME},{namePrefix:\"ESP32\"}],optionalServices:[ESP32_SERVICE_UUID]});console.log(\"Dispositivo selecionado:\",device.name);// Conectar ao GATT Server\nconst server=await((_device$gatt=device.gatt)===null||_device$gatt===void 0?void 0:_device$gatt.connect());if(!server){throw new Error(\"N√£o foi poss√≠vel conectar ao servidor GATT\");}// Obter o servi√ßo\nconst service=await server.getPrimaryService(ESP32_SERVICE_UUID);// Obter a caracter√≠stica para escrita\nconst characteristic=await service.getCharacteristic(ESP32_CHARACTERISTIC_UUID);// Habilitar notifica√ß√µes se dispon√≠vel\ntry{await characteristic.startNotifications();characteristic.addEventListener('characteristicvaluechanged',event=>{const target=event.target;const value=target.value;if(value){const decoder=new TextDecoder();const message=decoder.decode(value);console.log(\"Mensagem recebida do ESP32:\",message);}});}catch(error){console.log(\"Notifica√ß√µes n√£o dispon√≠veis, apenas escrita\");}setBluetoothDevice({id:device.id,name:device.name||ESP32_DEVICE_NAME,gatt:server});setBluetoothCharacteristic(characteristic);setIsBluetoothConnected(true);console.log(\"Conectado ao ESP32 via Bluetooth!\");alert(\"Conectado ao ESP32 via Bluetooth!\");}catch(error){console.error(\"Erro ao conectar Bluetooth:\",error);if(error instanceof Error){if(error.name==='NotFoundError'){alert(\"ESP32 n√£o encontrado. Verifique se est√° ligado e vis√≠vel.\");}else if(error.name==='NotAllowedError'){alert(\"Permiss√£o negada para Bluetooth.\");}else{alert(\"Erro de conex\\xE3o: \".concat(error.message));}}else{alert(\"Erro desconhecido ao conectar Bluetooth.\");}}finally{setIsConnectingBluetooth(false);}};// Fun√ß√£o para desconectar Bluetooth\nconst disconnectBluetooth=async()=>{var _bluetoothDevice$gatt;if(bluetoothDevice!==null&&bluetoothDevice!==void 0&&(_bluetoothDevice$gatt=bluetoothDevice.gatt)!==null&&_bluetoothDevice$gatt!==void 0&&_bluetoothDevice$gatt.connected){await bluetoothDevice.gatt.disconnect();}setBluetoothDevice(null);setBluetoothCharacteristic(null);setIsBluetoothConnected(false);console.log(\"Desconectado do ESP32\");};// Fun√ß√£o para enviar instru√ß√£o via Bluetooth\nconst sendInstructionViaBluetooth=useCallback(async instruction=>{if(!bluetoothCharacteristic||!isBluetoothConnected){console.error(\"Bluetooth n√£o conectado\");return;}try{const encoder=new TextEncoder();const data=encoder.encode(instruction+'\\n');// Adiciona quebra de linha\nawait bluetoothCharacteristic.writeValue(data);console.log(\"Instru\\xE7\\xE3o enviada via Bluetooth: \".concat(instruction));}catch(error){console.error(\"Erro ao enviar via Bluetooth:\",error);alert(\"Erro ao enviar instru√ß√£o via Bluetooth. Verifique a conex√£o.\");}},[bluetoothCharacteristic,isBluetoothConnected]);// Fun√ß√£o para enviar instru√ß√£o (agora usa Bluetooth em vez de HTTP)\nconst sendSingleInstructionToESP32=useCallback(async instruction=>{if(isBluetoothConnected){await sendInstructionViaBluetooth(instruction);}else{console.log(\"Bluetooth n√£o conectado. Instru√ß√£o n√£o enviada.\");alert(\"Conecte ao ESP32 via Bluetooth primeiro.\");}},[isBluetoothConnected,sendInstructionViaBluetooth]);// Solicitar localiza√ß√£o\nconst requestLocation=()=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{const pos={lat:position.coords.latitude,lng:position.coords.longitude};setCurrentPosition(pos);setShowLocationRequest(false);setAppState('main');},()=>{alert(\"Erro: O servi√ßo de geolocaliza√ß√£o falhou.\");});}else{alert(\"Erro: Seu navegador n√£o suporta geolocaliza√ß√£o.\");}};// Efeito para monitorar o status da conex√£o (online/offline)\nuseEffect(()=>{const handleOnline=()=>setIsOnline(true);const handleOffline=()=>setIsOnline(false);window.addEventListener('online',handleOnline);window.addEventListener('offline',handleOffline);return()=>{window.removeEventListener('online',handleOnline);window.removeEventListener('offline',handleOffline);};},[]);// Efeito para carregar as rotas salvas do localStorage ao iniciar\nuseEffect(()=>{try{const routesFromStorage=localStorage.getItem('savedNavigationRoutes');if(routesFromStorage){setSavedRoutes(JSON.parse(routesFromStorage));}}catch(error){console.error(\"Erro ao carregar rotas do localStorage:\",error);}},[]);// Nova fun√ß√£o para calcular a dist√¢ncia entre dois pontos de GPS (f√≥rmula de Haversine)\nconst getDistanceInMeters=useCallback((pos1,pos2)=>{const R=6371e3;// Metros\nconst p1=pos1.lat*Math.PI/180;const p2=pos2.lat*Math.PI/180;const deltaP=(pos2.lat-pos1.lat)*Math.PI/180;const deltaL=(pos2.lng-pos1.lng)*Math.PI/180;const a=Math.sin(deltaP/2)*Math.sin(deltaP/2)+Math.cos(p1)*Math.cos(p2)*Math.sin(deltaL/2)*Math.sin(deltaL/2);const c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return R*c;// em metros\n},[]);const calculateRoute=async()=>{var _destinationRef$curre;if(!isOnline){alert(\"Funcionalidade indispon√≠vel offline. Carregue uma rota salva.\");return;}if(!((_destinationRef$curre=destinationRef.current)!==null&&_destinationRef$curre!==void 0&&_destinationRef$curre.value)||!currentPosition){return;}const directionsService=new google.maps.DirectionsService();const results=await directionsService.route({origin:currentPosition,destination:destinationRef.current.value,travelMode:google.maps.TravelMode.DRIVING,language:'pt-BR'// Instru√ß√µes em Portugu√™s\n});setDirectionsResponse(results);generateSimplifiedInstructions(results);};const generateSimplifiedInstructions=directions=>{if(!directions.routes||directions.routes.length===0){return;}const route=directions.routes[0].legs[0];const instructions=route.steps.map(step=>{var _step$distance;// Remove tags HTML da instru√ß√£o (ex: <b>, <div>)\nconst cleanInstruction=step.instructions.replace(/<[^>]*>/g,'');const distance=((_step$distance=step.distance)===null||_step$distance===void 0?void 0:_step$distance.text)||'';return\"\".concat(cleanInstruction,\" (\").concat(distance,\")\");});setSimplifiedInstructions(instructions);};// Fun√ß√µes para gerenciar rotas salvas\nconst saveCurrentRoute=()=>{var _destinationRef$curre2;if(!isOnline){alert(\"Funcionalidade indispon√≠vel offline.\");return;}if(!directionsResponse||!((_destinationRef$curre2=destinationRef.current)!==null&&_destinationRef$curre2!==void 0&&_destinationRef$curre2.value)){alert(\"Nenhuma rota calculada para salvar.\");return;}const routeName=destinationRef.current.value;if(savedRoutes.some(route=>route.name===routeName)){if(!window.confirm(\"Uma rota para \\\"\".concat(routeName,\"\\\" j\\xE1 existe. Deseja substitu\\xED-la?\"))){return;}}const newRoute={name:routeName,directions:directionsResponse};const updatedRoutes=savedRoutes.filter(route=>route.name!==routeName);updatedRoutes.push(newRoute);setSavedRoutes(updatedRoutes);localStorage.setItem('savedNavigationRoutes',JSON.stringify(updatedRoutes));alert(\"Rota para \\\"\".concat(routeName,\"\\\" salva com sucesso!\"));};const loadSavedRoute=routeToLoad=>{setDirectionsResponse(routeToLoad.directions);generateSimplifiedInstructions(routeToLoad.directions);setIsNavigating(false);if(destinationRef.current){destinationRef.current.value=routeToLoad.name;}alert(\"Rota para \\\"\".concat(routeToLoad.name,\"\\\" carregada.\"));};const deleteSavedRoute=indexToDelete=>{if(window.confirm(\"Tem certeza que deseja deletar esta rota?\")){const updatedRoutes=savedRoutes.filter((_,index)=>index!==indexToDelete);setSavedRoutes(updatedRoutes);localStorage.setItem('savedNavigationRoutes',JSON.stringify(updatedRoutes));}};const stopNavigation=()=>{if(locationWatcherId.current!==null){navigator.geolocation.clearWatch(locationWatcherId.current);locationWatcherId.current=null;}setIsNavigating(false);alert(\"Navega√ß√£o encerrada.\");};const advanceToStep=useCallback(stepIndex=>{if(!directionsResponse)return;const route=directionsResponse.routes[0].legs[0];if(stepIndex>=route.steps.length){sendSingleInstructionToESP32(\"Voc√™ chegou ao seu destino!\");stopNavigation();return;}const step=route.steps[stepIndex];const instructionText=step.instructions.replace(/<[^>]*>/g,'');sendSingleInstructionToESP32(instructionText);setCurrentStepIndex(prevIndex=>prevIndex+1);},[directionsResponse,sendSingleInstructionToESP32]);const handleLocationUpdate=useCallback(position=>{if(!(directionsResponse!==null&&directionsResponse!==void 0&&directionsResponse.routes[0]))return;const userPosition={lat:position.coords.latitude,lng:position.coords.longitude};setCurrentPosition(userPosition);const route=directionsResponse.routes[0].legs[0];if(currentStepIndex>=route.steps.length){advanceToStep(currentStepIndex);// Para enviar a mensagem final\nreturn;}const nextStep=route.steps[currentStepIndex];let nextStepLocation;const startLocation=nextStep.start_location;if(typeof startLocation.lat==='function'){nextStepLocation={lat:startLocation.lat(),lng:startLocation.lng()};}else{nextStepLocation=startLocation;}const distance=getDistanceInMeters(userPosition,nextStepLocation);if(distance<NAVIGATION_TRIGGER_DISTANCE_METERS){advanceToStep(currentStepIndex);}},[directionsResponse,currentStepIndex,advanceToStep,getDistanceInMeters]);const handleLocationError=useCallback(error=>{alert(\"Erro de geolocaliza\\xE7\\xE3o: \".concat(error.message));stopNavigation();},[]);// Este useEffect √© o c√©rebro da navega√ß√£o em tempo real\nuseEffect(()=>{if(!isNavigating){return;}locationWatcherId.current=navigator.geolocation.watchPosition(handleLocationUpdate,handleLocationError,{enableHighAccuracy:true,timeout:10000,maximumAge:0});return()=>{if(locationWatcherId.current!==null){navigator.geolocation.clearWatch(locationWatcherId.current);}};},[isNavigating,handleLocationUpdate,handleLocationError]);const startNavigation=()=>{if(!directionsResponse){alert(\"Carregue uma rota primeiro.\");return;}stopNavigation();// Garante que qualquer watch anterior seja limpo\nsetCurrentStepIndex(0);setIsNavigating(true);alert(\"Iniciando a navega√ß√£o!\");};const forceNextInstruction=()=>{if(!isNavigating){alert(\"A navega√ß√£o n√£o est√° ativa.\");return;}advanceToStep(currentStepIndex);};if(!isLoaded)return/*#__PURE__*/_jsx(\"div\",{className:\"loading-screen\",children:\"Carregando...\"});// Tela de carregamento\nif(appState==='loading'){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-screen\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-logo\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"glasses-animation\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"glasses-frame\"}),/*#__PURE__*/_jsx(\"div\",{className:\"glasses-lens left\"}),/*#__PURE__*/_jsx(\"div\",{className:\"glasses-lens right\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-text\",children:\"Castrilha\"})]});}// Tela de introdu√ß√£o\nif(appState==='intro'){return/*#__PURE__*/_jsxs(\"div\",{className:\"intro-screen\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"intro-logo \".concat(introStep>=1?'animate':''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"glasses-animation\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"glasses-frame\"}),/*#__PURE__*/_jsx(\"div\",{className:\"glasses-lens left\"}),/*#__PURE__*/_jsx(\"div\",{className:\"glasses-lens right\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"intro-title \".concat(introStep>=2?'animate':''),children:\"Castrilha\"}),showLocationRequest&&/*#__PURE__*/_jsxs(\"div\",{className:\"location-request\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Permitir acesso \\xE0 localiza\\xE7\\xE3o?\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Precisamos da sua localiza\\xE7\\xE3o para fornecer navega\\xE7\\xE3o precisa.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:requestLocation,children:\"Permitir Localiza\\xE7\\xE3o\"})]})]});}// Tela principal\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"logo-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"glasses-logo\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"glasses-frame\"}),/*#__PURE__*/_jsx(\"div\",{className:\"glasses-lens left\"}),/*#__PURE__*/_jsx(\"div\",{className:\"glasses-lens right\"})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"app-title\",children:\"Castrilha\"})]})}),!isOnline&&/*#__PURE__*/_jsx(\"div\",{className:\"offline-banner\",children:/*#__PURE__*/_jsx(\"p\",{children:\"MODO OFFLINE ATIVO\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bluetooth-controls\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDD35 Conex\\xE3o Bluetooth\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bluetooth-status\",children:isBluetoothConnected?/*#__PURE__*/_jsxs(\"div\",{className:\"connected-status\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-indicator connected\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Conectado: \",bluetoothDevice===null||bluetoothDevice===void 0?void 0:bluetoothDevice.name]}),/*#__PURE__*/_jsx(\"button\",{className:\"button disconnect-btn\",onClick:disconnectBluetooth,children:\"Desconectar\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"disconnected-status\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-indicator disconnected\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Desconectado\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button connect-btn\",onClick:connectToESP32,disabled:isConnectingBluetooth,children:isConnectingBluetooth?'Conectando...':'Conectar ESP32'})]})}),!isBluetoothSupported()&&/*#__PURE__*/_jsx(\"div\",{className:\"bluetooth-warning\",children:\"\\u26A0\\uFE0F Seu navegador n\\xE3o suporta Web Bluetooth. Use Chrome ou Edge.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Navega\\xE7\\xE3o Ponto a Ponto\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(Autocomplete,{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Destino\",ref:destinationRef,disabled:!isOnline})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:calculateRoute,disabled:!isOnline,children:\"Obter Rota\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:saveCurrentRoute,disabled:!isOnline,children:\"Salvar Rota Atual\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"navigation-controls\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Controle de Navega\\xE7\\xE3o\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[!isNavigating?/*#__PURE__*/_jsx(\"button\",{onClick:startNavigation,className:\"button start-nav-btn\",disabled:!directionsResponse,children:\"Iniciar Navega\\xE7\\xE3o\"}):/*#__PURE__*/_jsx(\"button\",{onClick:stopNavigation,className:\"button stop-nav-btn\",children:\"Parar Navega\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"button\",{onClick:forceNextInstruction,className:\"button\",disabled:!isNavigating,children:\"Pr\\xF3xima Instru\\xE7\\xE3o (Teste)\"})]}),isNavigating&&/*#__PURE__*/_jsxs(\"p\",{className:\"nav-status\",children:[\"Navega\\xE7\\xE3o em curso... Pr\\xF3ximo passo: \",currentStepIndex+1]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"saved-routes-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Rotas Salvas\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"route-list\",children:savedRoutes.length>0?savedRoutes.map((route,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"route-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:route.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"route-item-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadSavedRoute(route),children:\"Carregar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteSavedRoute(index),className:\"delete-btn\",children:\"X\"})]})]},index)):/*#__PURE__*/_jsx(\"p\",{children:\"Nenhuma rota salva.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"instructions-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Instru\\xE7\\xF5es\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"instructions-list\",children:simplifiedInstructions.map((inst,index)=>/*#__PURE__*/_jsx(\"li\",{className:index===currentStepIndex-1?'current-instruction':'',children:inst},index))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:isOnline?/*#__PURE__*/_jsxs(GoogleMap,{mapContainerStyle:containerStyle,center:currentPosition||{lat:-23.55052,lng:-46.633308},zoom:15,onLoad:setMap,options:{mapTypeControl:false,streetViewControl:false,fullscreenControl:false},children:[directionsResponse&&/*#__PURE__*/_jsx(DirectionsRenderer,{directions:directionsResponse}),currentPosition&&/*#__PURE__*/_jsx(Marker,{position:currentPosition})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"offline-map-placeholder\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Mapa indispon\\xEDvel em modo offline\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Use as rotas salvas para navegar. A sua localiza\\xE7\\xE3o continua sendo rastreada.\"})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","GoogleMap","useJsApiLoader","Marker","Autocomplete","DirectionsRenderer","jsx","_jsx","jsxs","_jsxs","GOOGLE_MAPS_API_KEY","ESP32_DEVICE_NAME","ESP32_SERVICE_UUID","ESP32_CHARACTERISTIC_UUID","containerStyle","width","height","NAVIGATION_TRIGGER_DISTANCE_METERS","libraries","App","isLoaded","id","googleMapsApiKey","appState","setAppState","introStep","setIntroStep","showLocationRequest","setShowLocationRequest","map","setMap","directionsResponse","setDirectionsResponse","currentPosition","setCurrentPosition","simplifiedInstructions","setSimplifiedInstructions","isNavigating","setIsNavigating","currentStepIndex","setCurrentStepIndex","savedRoutes","setSavedRoutes","locationWatcherId","isOnline","setIsOnline","navigator","onLine","isBluetoothConnected","setIsBluetoothConnected","bluetoothDevice","setBluetoothDevice","bluetoothCharacteristic","setBluetoothCharacteristic","isConnectingBluetooth","setIsConnectingBluetooth","destinationRef","timer","setTimeout","clearTimeout","isBluetoothSupported","connectToESP32","bluetooth","alert","_device$gatt","device","requestDevice","filters","name","namePrefix","optionalServices","console","log","server","gatt","connect","Error","service","getPrimaryService","characteristic","getCharacteristic","startNotifications","addEventListener","event","target","value","decoder","TextDecoder","message","decode","error","concat","disconnectBluetooth","_bluetoothDevice$gatt","connected","disconnect","sendInstructionViaBluetooth","instruction","encoder","TextEncoder","data","encode","writeValue","sendSingleInstructionToESP32","requestLocation","geolocation","getCurrentPosition","position","pos","lat","coords","latitude","lng","longitude","handleOnline","handleOffline","window","removeEventListener","routesFromStorage","localStorage","getItem","JSON","parse","getDistanceInMeters","pos1","pos2","R","p1","Math","PI","p2","deltaP","deltaL","a","sin","cos","c","atan2","sqrt","calculateRoute","_destinationRef$curre","current","directionsService","google","maps","DirectionsService","results","route","origin","destination","travelMode","TravelMode","DRIVING","language","generateSimplifiedInstructions","directions","routes","length","legs","instructions","steps","step","_step$distance","cleanInstruction","replace","distance","text","saveCurrentRoute","_destinationRef$curre2","routeName","some","confirm","newRoute","updatedRoutes","filter","push","setItem","stringify","loadSavedRoute","routeToLoad","deleteSavedRoute","indexToDelete","_","index","stopNavigation","clearWatch","advanceToStep","stepIndex","instructionText","prevIndex","handleLocationUpdate","userPosition","nextStep","nextStepLocation","startLocation","start_location","handleLocationError","watchPosition","enableHighAccuracy","timeout","maximumAge","startNavigation","forceNextInstruction","className","children","onClick","disabled","type","placeholder","ref","inst","mapContainerStyle","center","zoom","onLoad","options","mapTypeControl","streetViewControl","fullscreenControl"],"sources":["C:/esp32-navigation-app/mobile-app/src/App.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { GoogleMap, useJsApiLoader, Marker, Autocomplete, DirectionsRenderer } from '@react-google-maps/api';\n\n// Defini√ß√µes de tipos para Web Bluetooth API\ndeclare global {\n  interface Navigator {\n    bluetooth?: Bluetooth;\n  }\n  \n  interface Bluetooth {\n    requestDevice(options: RequestDeviceOptions): Promise<BluetoothDevice>;\n  }\n  \n  interface RequestDeviceOptions {\n    filters?: BluetoothLEScanFilter[];\n    optionalServices?: string[];\n  }\n  \n  interface BluetoothLEScanFilter {\n    name?: string;\n    namePrefix?: string;\n    services?: string[];\n  }\n  \n  interface BluetoothDevice {\n    id: string;\n    name?: string;\n    gatt?: BluetoothRemoteGATTServer;\n  }\n  \n  interface BluetoothRemoteGATTServer {\n    connect(): Promise<BluetoothRemoteGATTServer>;\n    getPrimaryService(service: string): Promise<BluetoothRemoteGATTService>;\n    connected: boolean;\n    disconnect(): void;\n  }\n  \n  interface BluetoothRemoteGATTService {\n    getCharacteristic(characteristic: string): Promise<BluetoothRemoteGATTCharacteristic>;\n  }\n  \n  interface BluetoothRemoteGATTCharacteristic {\n    writeValue(value: BufferSource): Promise<void>;\n    startNotifications(): Promise<BluetoothRemoteGATTCharacteristic>;\n    addEventListener(type: string, listener: EventListener): void;\n    value?: DataView;\n  }\n}\n\n// ##################################################################\n// # COLOQUE SUAS CHAVES AQUI                                       #\n// ##################################################################\n\n// 1. CHAVE DA API GOOGLE MAPS PLATFORM\n//    Ative as APIs: \"Maps JavaScript API\", \"Directions API\", \"Places API\"\n//    Instru√ß√µes: https://developers.google.com/maps/gmp-get-started\nconst GOOGLE_MAPS_API_KEY = \"AIzaSyAVEzH5bvFPDpgjQtnA4s2TKfjEW_0OTLY\";\n\n// 2. CONFIGURA√á√ïES BLUETOOTH\n//    Nome do dispositivo ESP32 que aparecer√° na lista de dispositivos Bluetooth\nconst ESP32_DEVICE_NAME = \"ESP32_Navigation\"; // Altere para o nome do seu ESP32\nconst ESP32_SERVICE_UUID = \"0000ffe0-0000-1000-8000-00805f9b34fb\"; // UUID do servi√ßo\nconst ESP32_CHARACTERISTIC_UUID = \"0000ffe1-0000-1000-8000-00805f9b34fb\"; // UUID da caracter√≠stica\n\n// ##################################################################\n\n// Interface para a estrutura da rota salva\ninterface SavedRoute {\n  name: string;\n  directions: google.maps.DirectionsResult;\n}\n\n// Interface para dispositivo Bluetooth\ninterface BluetoothDevice {\n  id: string;\n  name: string;\n  gatt?: BluetoothRemoteGATTServer;\n}\n\n// Estados da aplica√ß√£o\ntype AppState = 'loading' | 'intro' | 'main';\n\nconst containerStyle = {\n  width: '100%',\n  height: '100%'\n};\n\n// Adicionando uma constante para a dist√¢ncia de gatilho\nconst NAVIGATION_TRIGGER_DISTANCE_METERS = 50; // Dispara o envio da instru√ß√£o a 50 metros\n\nconst libraries: \"places\"[] = [\"places\"];\n\nfunction App() {\n  const { isLoaded } = useJsApiLoader({\n    id: 'google-map-script',\n    googleMapsApiKey: GOOGLE_MAPS_API_KEY,\n    libraries,\n  });\n\n  // Estados da aplica√ß√£o\n  const [appState, setAppState] = useState<AppState>('loading');\n  const [introStep, setIntroStep] = useState(0);\n  const [showLocationRequest, setShowLocationRequest] = useState(false);\n\n  const [map, setMap] = useState<google.maps.Map | null>(null);\n  const [directionsResponse, setDirectionsResponse] = useState<google.maps.DirectionsResult | null>(null);\n  const [currentPosition, setCurrentPosition] = useState<google.maps.LatLngLiteral | null>(null);\n  const [simplifiedInstructions, setSimplifiedInstructions] = useState<string[]>([]);\n  \n  // Novos estados para gerenciar a navega√ß√£o e rotas salvas\n  const [isNavigating, setIsNavigating] = useState(false);\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\n  const [savedRoutes, setSavedRoutes] = useState<SavedRoute[]>([]);\n  const locationWatcherId = useRef<number | null>(null);\n  \n  // Novo estado para o modo offline\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\n  \n  // Estados para Bluetooth\n  const [isBluetoothConnected, setIsBluetoothConnected] = useState(false);\n  const [bluetoothDevice, setBluetoothDevice] = useState<BluetoothDevice | null>(null);\n  const [bluetoothCharacteristic, setBluetoothCharacteristic] = useState<BluetoothRemoteGATTCharacteristic | null>(null);\n  const [isConnectingBluetooth, setIsConnectingBluetooth] = useState(false);\n  \n  const destinationRef = useRef<HTMLInputElement>(null);\n\n  // Anima√ß√£o de entrada\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setAppState('intro');\n    }, 2000);\n\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Sequ√™ncia de anima√ß√£o do intro\n  useEffect(() => {\n    if (appState === 'intro') {\n      const timer = setTimeout(() => {\n        setIntroStep(1);\n      }, 1000);\n\n      return () => clearTimeout(timer);\n    }\n  }, [appState]);\n\n  useEffect(() => {\n    if (introStep === 1) {\n      const timer = setTimeout(() => {\n        setIntroStep(2);\n      }, 1500);\n\n      return () => clearTimeout(timer);\n    }\n  }, [introStep]);\n\n  useEffect(() => {\n    if (introStep === 2) {\n      const timer = setTimeout(() => {\n        setShowLocationRequest(true);\n      }, 1000);\n\n      return () => clearTimeout(timer);\n    }\n  }, [introStep]);\n\n  // Verificar se o navegador suporta Web Bluetooth\n  const isBluetoothSupported = () => {\n    return 'bluetooth' in navigator;\n  };\n\n  // Fun√ß√£o para conectar ao ESP32 via Bluetooth\n  const connectToESP32 = async () => {\n    if (!isBluetoothSupported() || !navigator.bluetooth) {\n      alert(\"Seu navegador n√£o suporta Web Bluetooth. Use Chrome ou Edge.\");\n      return;\n    }\n\n    setIsConnectingBluetooth(true);\n    \n    try {\n      // Solicitar dispositivo Bluetooth\n      const device = await navigator.bluetooth.requestDevice({\n        filters: [\n          {\n            name: ESP32_DEVICE_NAME\n          },\n          {\n            namePrefix: \"ESP32\"\n          }\n        ],\n        optionalServices: [ESP32_SERVICE_UUID]\n      });\n\n      console.log(\"Dispositivo selecionado:\", device.name);\n\n      // Conectar ao GATT Server\n      const server = await device.gatt?.connect();\n      if (!server) {\n        throw new Error(\"N√£o foi poss√≠vel conectar ao servidor GATT\");\n      }\n\n      // Obter o servi√ßo\n      const service = await server.getPrimaryService(ESP32_SERVICE_UUID);\n      \n      // Obter a caracter√≠stica para escrita\n      const characteristic = await service.getCharacteristic(ESP32_CHARACTERISTIC_UUID);\n      \n      // Habilitar notifica√ß√µes se dispon√≠vel\n      try {\n        await characteristic.startNotifications();\n        characteristic.addEventListener('characteristicvaluechanged', (event) => {\n          const target = event.target as unknown as BluetoothRemoteGATTCharacteristic;\n          const value = target.value;\n          if (value) {\n            const decoder = new TextDecoder();\n            const message = decoder.decode(value);\n            console.log(\"Mensagem recebida do ESP32:\", message);\n          }\n        });\n      } catch (error) {\n        console.log(\"Notifica√ß√µes n√£o dispon√≠veis, apenas escrita\");\n      }\n\n      setBluetoothDevice({\n        id: device.id,\n        name: device.name || ESP32_DEVICE_NAME,\n        gatt: server\n      });\n      setBluetoothCharacteristic(characteristic);\n      setIsBluetoothConnected(true);\n      \n      console.log(\"Conectado ao ESP32 via Bluetooth!\");\n      alert(\"Conectado ao ESP32 via Bluetooth!\");\n      \n    } catch (error) {\n      console.error(\"Erro ao conectar Bluetooth:\", error);\n      if (error instanceof Error) {\n        if (error.name === 'NotFoundError') {\n          alert(\"ESP32 n√£o encontrado. Verifique se est√° ligado e vis√≠vel.\");\n        } else if (error.name === 'NotAllowedError') {\n          alert(\"Permiss√£o negada para Bluetooth.\");\n        } else {\n          alert(`Erro de conex√£o: ${error.message}`);\n        }\n      } else {\n        alert(\"Erro desconhecido ao conectar Bluetooth.\");\n      }\n    } finally {\n      setIsConnectingBluetooth(false);\n    }\n  };\n\n  // Fun√ß√£o para desconectar Bluetooth\n  const disconnectBluetooth = async () => {\n    if (bluetoothDevice?.gatt?.connected) {\n      await bluetoothDevice.gatt.disconnect();\n    }\n    setBluetoothDevice(null);\n    setBluetoothCharacteristic(null);\n    setIsBluetoothConnected(false);\n    console.log(\"Desconectado do ESP32\");\n  };\n\n  // Fun√ß√£o para enviar instru√ß√£o via Bluetooth\n  const sendInstructionViaBluetooth = useCallback(async (instruction: string) => {\n    if (!bluetoothCharacteristic || !isBluetoothConnected) {\n      console.error(\"Bluetooth n√£o conectado\");\n      return;\n    }\n\n    try {\n      const encoder = new TextEncoder();\n      const data = encoder.encode(instruction + '\\n'); // Adiciona quebra de linha\n      \n      await bluetoothCharacteristic.writeValue(data);\n      console.log(`Instru√ß√£o enviada via Bluetooth: ${instruction}`);\n    } catch (error) {\n      console.error(\"Erro ao enviar via Bluetooth:\", error);\n      alert(\"Erro ao enviar instru√ß√£o via Bluetooth. Verifique a conex√£o.\");\n    }\n  }, [bluetoothCharacteristic, isBluetoothConnected]);\n\n  // Fun√ß√£o para enviar instru√ß√£o (agora usa Bluetooth em vez de HTTP)\n  const sendSingleInstructionToESP32 = useCallback(async (instruction: string) => {\n    if (isBluetoothConnected) {\n      await sendInstructionViaBluetooth(instruction);\n    } else {\n      console.log(\"Bluetooth n√£o conectado. Instru√ß√£o n√£o enviada.\");\n      alert(\"Conecte ao ESP32 via Bluetooth primeiro.\");\n    }\n  }, [isBluetoothConnected, sendInstructionViaBluetooth]);\n\n  // Solicitar localiza√ß√£o\n  const requestLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const pos = {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          };\n          setCurrentPosition(pos);\n          setShowLocationRequest(false);\n          setAppState('main');\n        },\n        () => {\n          alert(\"Erro: O servi√ßo de geolocaliza√ß√£o falhou.\");\n        }\n      );\n    } else {\n      alert(\"Erro: Seu navegador n√£o suporta geolocaliza√ß√£o.\");\n    }\n  };\n\n  // Efeito para monitorar o status da conex√£o (online/offline)\n  useEffect(() => {\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n\n  // Efeito para carregar as rotas salvas do localStorage ao iniciar\n  useEffect(() => {\n    try {\n      const routesFromStorage = localStorage.getItem('savedNavigationRoutes');\n      if (routesFromStorage) {\n        setSavedRoutes(JSON.parse(routesFromStorage));\n      }\n    } catch (error) {\n      console.error(\"Erro ao carregar rotas do localStorage:\", error);\n    }\n  }, []);\n\n  // Nova fun√ß√£o para calcular a dist√¢ncia entre dois pontos de GPS (f√≥rmula de Haversine)\n  const getDistanceInMeters = useCallback((pos1: google.maps.LatLngLiteral, pos2: google.maps.LatLngLiteral) => {\n    const R = 6371e3; // Metros\n    const p1 = (pos1.lat * Math.PI) / 180;\n    const p2 = (pos2.lat * Math.PI) / 180;\n    const deltaP = ((pos2.lat - pos1.lat) * Math.PI) / 180;\n    const deltaL = ((pos2.lng - pos1.lng) * Math.PI) / 180;\n    const a =\n      Math.sin(deltaP / 2) * Math.sin(deltaP / 2) +\n      Math.cos(p1) * Math.cos(p2) * Math.sin(deltaL / 2) * Math.sin(deltaL / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c; // em metros\n  }, []);\n\n  const calculateRoute = async () => {\n    if (!isOnline) {\n      alert(\"Funcionalidade indispon√≠vel offline. Carregue uma rota salva.\");\n      return;\n    }\n    if (!destinationRef.current?.value || !currentPosition) {\n      return;\n    }\n    \n    const directionsService = new google.maps.DirectionsService();\n    const results = await directionsService.route({\n      origin: currentPosition,\n      destination: destinationRef.current.value,\n      travelMode: google.maps.TravelMode.DRIVING,\n      language: 'pt-BR', // Instru√ß√µes em Portugu√™s\n    });\n\n    setDirectionsResponse(results);\n    generateSimplifiedInstructions(results);\n  };\n  \n  const generateSimplifiedInstructions = (directions: google.maps.DirectionsResult) => {\n    if (!directions.routes || directions.routes.length === 0) {\n      return;\n    }\n    const route = directions.routes[0].legs[0];\n    const instructions = route.steps.map((step: google.maps.DirectionsStep) => {\n      // Remove tags HTML da instru√ß√£o (ex: <b>, <div>)\n      const cleanInstruction = step.instructions.replace(/<[^>]*>/g, '');\n      const distance = step.distance?.text || '';\n      return `${cleanInstruction} (${distance})`;\n    });\n    setSimplifiedInstructions(instructions);\n  };\n\n  // Fun√ß√µes para gerenciar rotas salvas\n  const saveCurrentRoute = () => {\n    if (!isOnline) {\n      alert(\"Funcionalidade indispon√≠vel offline.\");\n      return;\n    }\n    if (!directionsResponse || !destinationRef.current?.value) {\n      alert(\"Nenhuma rota calculada para salvar.\");\n      return;\n    }\n\n    const routeName = destinationRef.current.value;\n\n    if (savedRoutes.some(route => route.name === routeName)) {\n      if (!window.confirm(`Uma rota para \"${routeName}\" j√° existe. Deseja substitu√≠-la?`)) {\n        return;\n      }\n    }\n\n    const newRoute: SavedRoute = { name: routeName, directions: directionsResponse };\n    const updatedRoutes = savedRoutes.filter(route => route.name !== routeName);\n    updatedRoutes.push(newRoute);\n\n    setSavedRoutes(updatedRoutes);\n    localStorage.setItem('savedNavigationRoutes', JSON.stringify(updatedRoutes));\n    alert(`Rota para \"${routeName}\" salva com sucesso!`);\n  };\n\n  const loadSavedRoute = (routeToLoad: SavedRoute) => {\n    setDirectionsResponse(routeToLoad.directions);\n    generateSimplifiedInstructions(routeToLoad.directions);\n    setIsNavigating(false);\n    if (destinationRef.current) {\n        destinationRef.current.value = routeToLoad.name;\n    }\n    alert(`Rota para \"${routeToLoad.name}\" carregada.`);\n  };\n\n  const deleteSavedRoute = (indexToDelete: number) => {\n    if (window.confirm(\"Tem certeza que deseja deletar esta rota?\")) {\n      const updatedRoutes = savedRoutes.filter((_, index) => index !== indexToDelete);\n      setSavedRoutes(updatedRoutes);\n      localStorage.setItem('savedNavigationRoutes', JSON.stringify(updatedRoutes));\n    }\n  };\n\n  const stopNavigation = () => {\n    if (locationWatcherId.current !== null) {\n      navigator.geolocation.clearWatch(locationWatcherId.current);\n      locationWatcherId.current = null;\n    }\n    setIsNavigating(false);\n    alert(\"Navega√ß√£o encerrada.\");\n  };\n\n  const advanceToStep = useCallback((stepIndex: number) => {\n    if (!directionsResponse) return;\n    const route = directionsResponse.routes[0].legs[0];\n    if (stepIndex >= route.steps.length) {\n      sendSingleInstructionToESP32(\"Voc√™ chegou ao seu destino!\");\n      stopNavigation();\n      return;\n    }\n    const step = route.steps[stepIndex];\n    const instructionText = step.instructions.replace(/<[^>]*>/g, '');\n    sendSingleInstructionToESP32(instructionText);\n    setCurrentStepIndex(prevIndex => prevIndex + 1);\n  }, [directionsResponse, sendSingleInstructionToESP32]);\n\n  const handleLocationUpdate = useCallback((position: GeolocationPosition) => {\n    if (!directionsResponse?.routes[0]) return;\n    const userPosition: google.maps.LatLngLiteral = {\n      lat: position.coords.latitude,\n      lng: position.coords.longitude,\n    };\n    setCurrentPosition(userPosition);\n    const route = directionsResponse.routes[0].legs[0];\n    if (currentStepIndex >= route.steps.length) {\n      advanceToStep(currentStepIndex); // Para enviar a mensagem final\n      return;\n    }\n    const nextStep = route.steps[currentStepIndex];\n    \n    let nextStepLocation: google.maps.LatLngLiteral;\n    const startLocation = nextStep.start_location;\n\n    if (typeof startLocation.lat === 'function') {\n      nextStepLocation = { lat: startLocation.lat(), lng: startLocation.lng() };\n    } else {\n      nextStepLocation = startLocation as unknown as google.maps.LatLngLiteral;\n    }\n\n    const distance = getDistanceInMeters(userPosition, nextStepLocation);\n    if (distance < NAVIGATION_TRIGGER_DISTANCE_METERS) {\n      advanceToStep(currentStepIndex);\n    }\n  }, [directionsResponse, currentStepIndex, advanceToStep, getDistanceInMeters]);\n\n  const handleLocationError = useCallback((error: GeolocationPositionError) => {\n    alert(`Erro de geolocaliza√ß√£o: ${error.message}`);\n    stopNavigation();\n  }, []);\n  \n  // Este useEffect √© o c√©rebro da navega√ß√£o em tempo real\n  useEffect(() => {\n    if (!isNavigating) {\n        return;\n    }\n\n    locationWatcherId.current = navigator.geolocation.watchPosition(\n      handleLocationUpdate, \n      handleLocationError,\n      { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }\n    );\n\n    return () => {\n      if (locationWatcherId.current !== null) {\n        navigator.geolocation.clearWatch(locationWatcherId.current);\n      }\n    };\n  }, [isNavigating, handleLocationUpdate, handleLocationError]);\n\n  const startNavigation = () => {\n    if (!directionsResponse) {\n      alert(\"Carregue uma rota primeiro.\");\n      return;\n    }\n    stopNavigation(); // Garante que qualquer watch anterior seja limpo\n    setCurrentStepIndex(0);\n    setIsNavigating(true);\n    alert(\"Iniciando a navega√ß√£o!\");\n  };\n  \n  const forceNextInstruction = () => {\n      if (!isNavigating) {\n          alert(\"A navega√ß√£o n√£o est√° ativa.\");\n          return;\n      }\n      advanceToStep(currentStepIndex);\n  };\n\n  if (!isLoaded) return <div className=\"loading-screen\">Carregando...</div>;\n\n  // Tela de carregamento\n  if (appState === 'loading') {\n    return (\n      <div className=\"loading-screen\">\n        <div className=\"loading-logo\">\n          <div className=\"glasses-animation\">\n            <div className=\"glasses-frame\"></div>\n            <div className=\"glasses-lens left\"></div>\n            <div className=\"glasses-lens right\"></div>\n          </div>\n        </div>\n        <div className=\"loading-text\">Castrilha</div>\n      </div>\n    );\n  }\n\n  // Tela de introdu√ß√£o\n  if (appState === 'intro') {\n    return (\n      <div className=\"intro-screen\">\n        <div className={`intro-logo ${introStep >= 1 ? 'animate' : ''}`}>\n          <div className=\"glasses-animation\">\n            <div className=\"glasses-frame\"></div>\n            <div className=\"glasses-lens left\"></div>\n            <div className=\"glasses-lens right\"></div>\n          </div>\n        </div>\n        <div className={`intro-title ${introStep >= 2 ? 'animate' : ''}`}>\n          Castrilha\n        </div>\n        {showLocationRequest && (\n          <div className=\"location-request\">\n            <h3>Permitir acesso √† localiza√ß√£o?</h3>\n            <p>Precisamos da sua localiza√ß√£o para fornecer navega√ß√£o precisa.</p>\n            <button className=\"btn-primary\" onClick={requestLocation}>\n              Permitir Localiza√ß√£o\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  // Tela principal\n  return (\n    <div className='app-container'>\n      <div className='sidebar'>\n        <div className='header'>\n          <div className='logo-container'>\n            <div className=\"glasses-logo\">\n              <div className=\"glasses-frame\"></div>\n              <div className=\"glasses-lens left\"></div>\n              <div className=\"glasses-lens right\"></div>\n            </div>\n            <h1 className='app-title'>Castrilha</h1>\n          </div>\n        </div>\n        \n        {!isOnline && (\n          <div className='offline-banner'>\n            <p>MODO OFFLINE ATIVO</p>\n          </div>\n        )}\n\n        <div className='bluetooth-controls'>\n          <h3>üîµ Conex√£o Bluetooth</h3>\n          <div className='bluetooth-status'>\n            {isBluetoothConnected ? (\n              <div className='connected-status'>\n                <span className='status-indicator connected'></span>\n                <span>Conectado: {bluetoothDevice?.name}</span>\n                <button \n                  className='button disconnect-btn' \n                  onClick={disconnectBluetooth}\n                >\n                  Desconectar\n                </button>\n              </div>\n            ) : (\n              <div className='disconnected-status'>\n                <span className='status-indicator disconnected'></span>\n                <span>Desconectado</span>\n                <button \n                  className='button connect-btn' \n                  onClick={connectToESP32}\n                  disabled={isConnectingBluetooth}\n                >\n                  {isConnectingBluetooth ? 'Conectando...' : 'Conectar ESP32'}\n                </button>\n              </div>\n            )}\n          </div>\n          {!isBluetoothSupported() && (\n            <div className='bluetooth-warning'>\n              ‚ö†Ô∏è Seu navegador n√£o suporta Web Bluetooth. Use Chrome ou Edge.\n            </div>\n          )}\n        </div>\n\n        <div className='controls-container'>\n          <h2>Navega√ß√£o Ponto a Ponto</h2>\n          <div className='input-group'>\n            <Autocomplete>\n              <input \n                type='text' \n                placeholder='Destino' \n                ref={destinationRef}\n                disabled={!isOnline}\n              />\n            </Autocomplete>\n          </div>\n          <div className='button-group'>\n            <button \n              className='button' \n              onClick={calculateRoute}\n              disabled={!isOnline}\n            >\n              Obter Rota\n            </button>\n            <button \n              className='button' \n              onClick={saveCurrentRoute}\n              disabled={!isOnline}\n            >\n              Salvar Rota Atual\n            </button>\n          </div>\n        </div>\n\n        <div className='navigation-controls'>\n          <h3>Controle de Navega√ß√£o</h3>\n          <div className='button-group'>\n            {!isNavigating ? (\n                <button onClick={startNavigation} className='button start-nav-btn' disabled={!directionsResponse}>\n                    Iniciar Navega√ß√£o\n                </button>\n            ) : (\n                <button onClick={stopNavigation} className='button stop-nav-btn'>\n                    Parar Navega√ß√£o\n                </button>\n            )}\n            <button onClick={forceNextInstruction} className='button' disabled={!isNavigating}>\n                Pr√≥xima Instru√ß√£o (Teste)\n            </button>\n          </div>\n          {isNavigating && (\n              <p className='nav-status'>Navega√ß√£o em curso... Pr√≥ximo passo: {currentStepIndex + 1}</p>\n          )}\n        </div>\n\n        <div className='saved-routes-container'>\n          <h3>Rotas Salvas</h3>\n          <ul className='route-list'>\n            {savedRoutes.length > 0 ? (\n              savedRoutes.map((route, index) => (\n                <li key={index} className='route-item'>\n                  <span>{route.name}</span>\n                  <div className='route-item-buttons'>\n                    <button onClick={() => loadSavedRoute(route)}>Carregar</button>\n                    <button onClick={() => deleteSavedRoute(index)} className='delete-btn'>X</button>\n                  </div>\n                </li>\n              ))\n            ) : (\n              <p>Nenhuma rota salva.</p>\n            )}\n          </ul>\n        </div>\n\n        <div className='instructions-container'>\n            <h3>Instru√ß√µes</h3>\n            <ul className='instructions-list'>\n                {simplifiedInstructions.map((inst, index) => (\n                    <li key={index} className={index === currentStepIndex -1 ? 'current-instruction' : ''}>\n                        {inst}\n                    </li>\n                ))}\n            </ul>\n        </div>\n      </div>\n\n      <div className='map-container'>\n        {isOnline ? (\n          <GoogleMap\n            mapContainerStyle={containerStyle}\n            center={currentPosition || { lat: -23.55052, lng: -46.633308 }}\n            zoom={15}\n            onLoad={setMap}\n            options={{\n              mapTypeControl: false,\n              streetViewControl: false,\n              fullscreenControl: false,\n            }}\n          >\n            {directionsResponse && <DirectionsRenderer directions={directionsResponse} />}\n            {currentPosition && <Marker position={currentPosition} />}\n          </GoogleMap>\n        ) : (\n          <div className='offline-map-placeholder'>\n            <h2>Mapa indispon√≠vel em modo offline</h2>\n            <p>Use as rotas salvas para navegar. A sua localiza√ß√£o continua sendo rastreada.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CACvE,OAASC,SAAS,CAAEC,cAAc,CAAEC,MAAM,CAAEC,YAAY,CAAEC,kBAAkB,KAAQ,wBAAwB,CAE5G;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBA8CA;AACA;AACA;AAEA;AACA;AACA;AACA,KAAM,CAAAC,mBAAmB,CAAG,yCAAyC,CAErE;AACA;AACA,KAAM,CAAAC,iBAAiB,CAAG,kBAAkB,CAAE;AAC9C,KAAM,CAAAC,kBAAkB,CAAG,sCAAsC,CAAE;AACnE,KAAM,CAAAC,yBAAyB,CAAG,sCAAsC,CAAE;AAE1E;AAEA;AAMA;AAOA;AAGA,KAAM,CAAAC,cAAc,CAAG,CACrBC,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,MACV,CAAC,CAED;AACA,KAAM,CAAAC,kCAAkC,CAAG,EAAE,CAAE;AAE/C,KAAM,CAAAC,SAAqB,CAAG,CAAC,QAAQ,CAAC,CAExC,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAAEC,QAAS,CAAC,CAAGlB,cAAc,CAAC,CAClCmB,EAAE,CAAE,mBAAmB,CACvBC,gBAAgB,CAAEZ,mBAAmB,CACrCQ,SACF,CAAC,CAAC,CAEF;AACA,KAAM,CAACK,QAAQ,CAAEC,WAAW,CAAC,CAAG3B,QAAQ,CAAW,SAAS,CAAC,CAC7D,KAAM,CAAC4B,SAAS,CAAEC,YAAY,CAAC,CAAG7B,QAAQ,CAAC,CAAC,CAAC,CAC7C,KAAM,CAAC8B,mBAAmB,CAAEC,sBAAsB,CAAC,CAAG/B,QAAQ,CAAC,KAAK,CAAC,CAErE,KAAM,CAACgC,GAAG,CAAEC,MAAM,CAAC,CAAGjC,QAAQ,CAAyB,IAAI,CAAC,CAC5D,KAAM,CAACkC,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGnC,QAAQ,CAAsC,IAAI,CAAC,CACvG,KAAM,CAACoC,eAAe,CAAEC,kBAAkB,CAAC,CAAGrC,QAAQ,CAAmC,IAAI,CAAC,CAC9F,KAAM,CAACsC,sBAAsB,CAAEC,yBAAyB,CAAC,CAAGvC,QAAQ,CAAW,EAAE,CAAC,CAElF;AACA,KAAM,CAACwC,YAAY,CAAEC,eAAe,CAAC,CAAGzC,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAAC0C,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG3C,QAAQ,CAAC,CAAC,CAAC,CAC3D,KAAM,CAAC4C,WAAW,CAAEC,cAAc,CAAC,CAAG7C,QAAQ,CAAe,EAAE,CAAC,CAChE,KAAM,CAAA8C,iBAAiB,CAAG7C,MAAM,CAAgB,IAAI,CAAC,CAErD;AACA,KAAM,CAAC8C,QAAQ,CAAEC,WAAW,CAAC,CAAGhD,QAAQ,CAACiD,SAAS,CAACC,MAAM,CAAC,CAE1D;AACA,KAAM,CAACC,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGpD,QAAQ,CAAC,KAAK,CAAC,CACvE,KAAM,CAACqD,eAAe,CAAEC,kBAAkB,CAAC,CAAGtD,QAAQ,CAAyB,IAAI,CAAC,CACpF,KAAM,CAACuD,uBAAuB,CAAEC,0BAA0B,CAAC,CAAGxD,QAAQ,CAA2C,IAAI,CAAC,CACtH,KAAM,CAACyD,qBAAqB,CAAEC,wBAAwB,CAAC,CAAG1D,QAAQ,CAAC,KAAK,CAAC,CAEzE,KAAM,CAAA2D,cAAc,CAAG1D,MAAM,CAAmB,IAAI,CAAC,CAErD;AACAC,SAAS,CAAC,IAAM,CACd,KAAM,CAAA0D,KAAK,CAAGC,UAAU,CAAC,IAAM,CAC7BlC,WAAW,CAAC,OAAO,CAAC,CACtB,CAAC,CAAE,IAAI,CAAC,CAER,MAAO,IAAMmC,YAAY,CAACF,KAAK,CAAC,CAClC,CAAC,CAAE,EAAE,CAAC,CAEN;AACA1D,SAAS,CAAC,IAAM,CACd,GAAIwB,QAAQ,GAAK,OAAO,CAAE,CACxB,KAAM,CAAAkC,KAAK,CAAGC,UAAU,CAAC,IAAM,CAC7BhC,YAAY,CAAC,CAAC,CAAC,CACjB,CAAC,CAAE,IAAI,CAAC,CAER,MAAO,IAAMiC,YAAY,CAACF,KAAK,CAAC,CAClC,CACF,CAAC,CAAE,CAAClC,QAAQ,CAAC,CAAC,CAEdxB,SAAS,CAAC,IAAM,CACd,GAAI0B,SAAS,GAAK,CAAC,CAAE,CACnB,KAAM,CAAAgC,KAAK,CAAGC,UAAU,CAAC,IAAM,CAC7BhC,YAAY,CAAC,CAAC,CAAC,CACjB,CAAC,CAAE,IAAI,CAAC,CAER,MAAO,IAAMiC,YAAY,CAACF,KAAK,CAAC,CAClC,CACF,CAAC,CAAE,CAAChC,SAAS,CAAC,CAAC,CAEf1B,SAAS,CAAC,IAAM,CACd,GAAI0B,SAAS,GAAK,CAAC,CAAE,CACnB,KAAM,CAAAgC,KAAK,CAAGC,UAAU,CAAC,IAAM,CAC7B9B,sBAAsB,CAAC,IAAI,CAAC,CAC9B,CAAC,CAAE,IAAI,CAAC,CAER,MAAO,IAAM+B,YAAY,CAACF,KAAK,CAAC,CAClC,CACF,CAAC,CAAE,CAAChC,SAAS,CAAC,CAAC,CAEf;AACA,KAAM,CAAAmC,oBAAoB,CAAGA,CAAA,GAAM,CACjC,MAAO,WAAW,EAAI,CAAAd,SAAS,CACjC,CAAC,CAED;AACA,KAAM,CAAAe,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CAACD,oBAAoB,CAAC,CAAC,EAAI,CAACd,SAAS,CAACgB,SAAS,CAAE,CACnDC,KAAK,CAAC,8DAA8D,CAAC,CACrE,OACF,CAEAR,wBAAwB,CAAC,IAAI,CAAC,CAE9B,GAAI,KAAAS,YAAA,CACF;AACA,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAnB,SAAS,CAACgB,SAAS,CAACI,aAAa,CAAC,CACrDC,OAAO,CAAE,CACP,CACEC,IAAI,CAAEzD,iBACR,CAAC,CACD,CACE0D,UAAU,CAAE,OACd,CAAC,CACF,CACDC,gBAAgB,CAAE,CAAC1D,kBAAkB,CACvC,CAAC,CAAC,CAEF2D,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEP,MAAM,CAACG,IAAI,CAAC,CAEpD;AACA,KAAM,CAAAK,MAAM,CAAG,OAAAT,YAAA,CAAMC,MAAM,CAACS,IAAI,UAAAV,YAAA,iBAAXA,YAAA,CAAaW,OAAO,CAAC,CAAC,EAC3C,GAAI,CAACF,MAAM,CAAE,CACX,KAAM,IAAI,CAAAG,KAAK,CAAC,4CAA4C,CAAC,CAC/D,CAEA;AACA,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAAJ,MAAM,CAACK,iBAAiB,CAAClE,kBAAkB,CAAC,CAElE;AACA,KAAM,CAAAmE,cAAc,CAAG,KAAM,CAAAF,OAAO,CAACG,iBAAiB,CAACnE,yBAAyB,CAAC,CAEjF;AACA,GAAI,CACF,KAAM,CAAAkE,cAAc,CAACE,kBAAkB,CAAC,CAAC,CACzCF,cAAc,CAACG,gBAAgB,CAAC,4BAA4B,CAAGC,KAAK,EAAK,CACvE,KAAM,CAAAC,MAAM,CAAGD,KAAK,CAACC,MAAsD,CAC3E,KAAM,CAAAC,KAAK,CAAGD,MAAM,CAACC,KAAK,CAC1B,GAAIA,KAAK,CAAE,CACT,KAAM,CAAAC,OAAO,CAAG,GAAI,CAAAC,WAAW,CAAC,CAAC,CACjC,KAAM,CAAAC,OAAO,CAAGF,OAAO,CAACG,MAAM,CAACJ,KAAK,CAAC,CACrCd,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEgB,OAAO,CAAC,CACrD,CACF,CAAC,CAAC,CACJ,CAAE,MAAOE,KAAK,CAAE,CACdnB,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC,CAC7D,CAEArB,kBAAkB,CAAC,CACjB9B,EAAE,CAAE4C,MAAM,CAAC5C,EAAE,CACb+C,IAAI,CAAEH,MAAM,CAACG,IAAI,EAAIzD,iBAAiB,CACtC+D,IAAI,CAAED,MACR,CAAC,CAAC,CACFpB,0BAA0B,CAAC0B,cAAc,CAAC,CAC1C9B,uBAAuB,CAAC,IAAI,CAAC,CAE7BsB,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC,CAChDT,KAAK,CAAC,mCAAmC,CAAC,CAE5C,CAAE,MAAO2B,KAAK,CAAE,CACdnB,OAAO,CAACmB,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnD,GAAIA,KAAK,WAAY,CAAAd,KAAK,CAAE,CAC1B,GAAIc,KAAK,CAACtB,IAAI,GAAK,eAAe,CAAE,CAClCL,KAAK,CAAC,2DAA2D,CAAC,CACpE,CAAC,IAAM,IAAI2B,KAAK,CAACtB,IAAI,GAAK,iBAAiB,CAAE,CAC3CL,KAAK,CAAC,kCAAkC,CAAC,CAC3C,CAAC,IAAM,CACLA,KAAK,wBAAA4B,MAAA,CAAqBD,KAAK,CAACF,OAAO,CAAE,CAAC,CAC5C,CACF,CAAC,IAAM,CACLzB,KAAK,CAAC,0CAA0C,CAAC,CACnD,CACF,CAAC,OAAS,CACRR,wBAAwB,CAAC,KAAK,CAAC,CACjC,CACF,CAAC,CAED;AACA,KAAM,CAAAqC,mBAAmB,CAAG,KAAAA,CAAA,GAAY,KAAAC,qBAAA,CACtC,GAAI3C,eAAe,SAAfA,eAAe,YAAA2C,qBAAA,CAAf3C,eAAe,CAAEwB,IAAI,UAAAmB,qBAAA,WAArBA,qBAAA,CAAuBC,SAAS,CAAE,CACpC,KAAM,CAAA5C,eAAe,CAACwB,IAAI,CAACqB,UAAU,CAAC,CAAC,CACzC,CACA5C,kBAAkB,CAAC,IAAI,CAAC,CACxBE,0BAA0B,CAAC,IAAI,CAAC,CAChCJ,uBAAuB,CAAC,KAAK,CAAC,CAC9BsB,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC,CACtC,CAAC,CAED;AACA,KAAM,CAAAwB,2BAA2B,CAAGhG,WAAW,CAAC,KAAO,CAAAiG,WAAmB,EAAK,CAC7E,GAAI,CAAC7C,uBAAuB,EAAI,CAACJ,oBAAoB,CAAE,CACrDuB,OAAO,CAACmB,KAAK,CAAC,yBAAyB,CAAC,CACxC,OACF,CAEA,GAAI,CACF,KAAM,CAAAQ,OAAO,CAAG,GAAI,CAAAC,WAAW,CAAC,CAAC,CACjC,KAAM,CAAAC,IAAI,CAAGF,OAAO,CAACG,MAAM,CAACJ,WAAW,CAAG,IAAI,CAAC,CAAE;AAEjD,KAAM,CAAA7C,uBAAuB,CAACkD,UAAU,CAACF,IAAI,CAAC,CAC9C7B,OAAO,CAACC,GAAG,2CAAAmB,MAAA,CAAqCM,WAAW,CAAE,CAAC,CAChE,CAAE,MAAOP,KAAK,CAAE,CACdnB,OAAO,CAACmB,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACrD3B,KAAK,CAAC,8DAA8D,CAAC,CACvE,CACF,CAAC,CAAE,CAACX,uBAAuB,CAAEJ,oBAAoB,CAAC,CAAC,CAEnD;AACA,KAAM,CAAAuD,4BAA4B,CAAGvG,WAAW,CAAC,KAAO,CAAAiG,WAAmB,EAAK,CAC9E,GAAIjD,oBAAoB,CAAE,CACxB,KAAM,CAAAgD,2BAA2B,CAACC,WAAW,CAAC,CAChD,CAAC,IAAM,CACL1B,OAAO,CAACC,GAAG,CAAC,iDAAiD,CAAC,CAC9DT,KAAK,CAAC,0CAA0C,CAAC,CACnD,CACF,CAAC,CAAE,CAACf,oBAAoB,CAAEgD,2BAA2B,CAAC,CAAC,CAEvD;AACA,KAAM,CAAAQ,eAAe,CAAGA,CAAA,GAAM,CAC5B,GAAI1D,SAAS,CAAC2D,WAAW,CAAE,CACzB3D,SAAS,CAAC2D,WAAW,CAACC,kBAAkB,CACrCC,QAAQ,EAAK,CACZ,KAAM,CAAAC,GAAG,CAAG,CACVC,GAAG,CAAEF,QAAQ,CAACG,MAAM,CAACC,QAAQ,CAC7BC,GAAG,CAAEL,QAAQ,CAACG,MAAM,CAACG,SACvB,CAAC,CACD/E,kBAAkB,CAAC0E,GAAG,CAAC,CACvBhF,sBAAsB,CAAC,KAAK,CAAC,CAC7BJ,WAAW,CAAC,MAAM,CAAC,CACrB,CAAC,CACD,IAAM,CACJuC,KAAK,CAAC,2CAA2C,CAAC,CACpD,CACF,CAAC,CACH,CAAC,IAAM,CACLA,KAAK,CAAC,iDAAiD,CAAC,CAC1D,CACF,CAAC,CAED;AACAhE,SAAS,CAAC,IAAM,CACd,KAAM,CAAAmH,YAAY,CAAGA,CAAA,GAAMrE,WAAW,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAAsE,aAAa,CAAGA,CAAA,GAAMtE,WAAW,CAAC,KAAK,CAAC,CAE9CuE,MAAM,CAAClC,gBAAgB,CAAC,QAAQ,CAAEgC,YAAY,CAAC,CAC/CE,MAAM,CAAClC,gBAAgB,CAAC,SAAS,CAAEiC,aAAa,CAAC,CAEjD,MAAO,IAAM,CACXC,MAAM,CAACC,mBAAmB,CAAC,QAAQ,CAAEH,YAAY,CAAC,CAClDE,MAAM,CAACC,mBAAmB,CAAC,SAAS,CAAEF,aAAa,CAAC,CACtD,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN;AACApH,SAAS,CAAC,IAAM,CACd,GAAI,CACF,KAAM,CAAAuH,iBAAiB,CAAGC,YAAY,CAACC,OAAO,CAAC,uBAAuB,CAAC,CACvE,GAAIF,iBAAiB,CAAE,CACrB5E,cAAc,CAAC+E,IAAI,CAACC,KAAK,CAACJ,iBAAiB,CAAC,CAAC,CAC/C,CACF,CAAE,MAAO5B,KAAK,CAAE,CACdnB,OAAO,CAACmB,KAAK,CAAC,yCAAyC,CAAEA,KAAK,CAAC,CACjE,CACF,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAiC,mBAAmB,CAAG3H,WAAW,CAAC,CAAC4H,IAA+B,CAAEC,IAA+B,GAAK,CAC5G,KAAM,CAAAC,CAAC,CAAG,MAAM,CAAE;AAClB,KAAM,CAAAC,EAAE,CAAIH,IAAI,CAACf,GAAG,CAAGmB,IAAI,CAACC,EAAE,CAAI,GAAG,CACrC,KAAM,CAAAC,EAAE,CAAIL,IAAI,CAAChB,GAAG,CAAGmB,IAAI,CAACC,EAAE,CAAI,GAAG,CACrC,KAAM,CAAAE,MAAM,CAAI,CAACN,IAAI,CAAChB,GAAG,CAAGe,IAAI,CAACf,GAAG,EAAImB,IAAI,CAACC,EAAE,CAAI,GAAG,CACtD,KAAM,CAAAG,MAAM,CAAI,CAACP,IAAI,CAACb,GAAG,CAAGY,IAAI,CAACZ,GAAG,EAAIgB,IAAI,CAACC,EAAE,CAAI,GAAG,CACtD,KAAM,CAAAI,CAAC,CACLL,IAAI,CAACM,GAAG,CAACH,MAAM,CAAG,CAAC,CAAC,CAAGH,IAAI,CAACM,GAAG,CAACH,MAAM,CAAG,CAAC,CAAC,CAC3CH,IAAI,CAACO,GAAG,CAACR,EAAE,CAAC,CAAGC,IAAI,CAACO,GAAG,CAACL,EAAE,CAAC,CAAGF,IAAI,CAACM,GAAG,CAACF,MAAM,CAAG,CAAC,CAAC,CAAGJ,IAAI,CAACM,GAAG,CAACF,MAAM,CAAG,CAAC,CAAC,CAC3E,KAAM,CAAAI,CAAC,CAAG,CAAC,CAAGR,IAAI,CAACS,KAAK,CAACT,IAAI,CAACU,IAAI,CAACL,CAAC,CAAC,CAAEL,IAAI,CAACU,IAAI,CAAC,CAAC,CAAGL,CAAC,CAAC,CAAC,CACxD,MAAO,CAAAP,CAAC,CAAGU,CAAC,CAAE;AAChB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,cAAc,CAAG,KAAAA,CAAA,GAAY,KAAAC,qBAAA,CACjC,GAAI,CAAChG,QAAQ,CAAE,CACbmB,KAAK,CAAC,+DAA+D,CAAC,CACtE,OACF,CACA,GAAI,GAAA6E,qBAAA,CAACpF,cAAc,CAACqF,OAAO,UAAAD,qBAAA,WAAtBA,qBAAA,CAAwBvD,KAAK,GAAI,CAACpD,eAAe,CAAE,CACtD,OACF,CAEA,KAAM,CAAA6G,iBAAiB,CAAG,GAAI,CAAAC,MAAM,CAACC,IAAI,CAACC,iBAAiB,CAAC,CAAC,CAC7D,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAAJ,iBAAiB,CAACK,KAAK,CAAC,CAC5CC,MAAM,CAAEnH,eAAe,CACvBoH,WAAW,CAAE7F,cAAc,CAACqF,OAAO,CAACxD,KAAK,CACzCiE,UAAU,CAAEP,MAAM,CAACC,IAAI,CAACO,UAAU,CAACC,OAAO,CAC1CC,QAAQ,CAAE,OAAS;AACrB,CAAC,CAAC,CAEFzH,qBAAqB,CAACkH,OAAO,CAAC,CAC9BQ,8BAA8B,CAACR,OAAO,CAAC,CACzC,CAAC,CAED,KAAM,CAAAQ,8BAA8B,CAAIC,UAAwC,EAAK,CACnF,GAAI,CAACA,UAAU,CAACC,MAAM,EAAID,UAAU,CAACC,MAAM,CAACC,MAAM,GAAK,CAAC,CAAE,CACxD,OACF,CACA,KAAM,CAAAV,KAAK,CAAGQ,UAAU,CAACC,MAAM,CAAC,CAAC,CAAC,CAACE,IAAI,CAAC,CAAC,CAAC,CAC1C,KAAM,CAAAC,YAAY,CAAGZ,KAAK,CAACa,KAAK,CAACnI,GAAG,CAAEoI,IAAgC,EAAK,KAAAC,cAAA,CACzE;AACA,KAAM,CAAAC,gBAAgB,CAAGF,IAAI,CAACF,YAAY,CAACK,OAAO,CAAC,UAAU,CAAE,EAAE,CAAC,CAClE,KAAM,CAAAC,QAAQ,CAAG,EAAAH,cAAA,CAAAD,IAAI,CAACI,QAAQ,UAAAH,cAAA,iBAAbA,cAAA,CAAeI,IAAI,GAAI,EAAE,CAC1C,SAAA3E,MAAA,CAAUwE,gBAAgB,OAAAxE,MAAA,CAAK0E,QAAQ,MACzC,CAAC,CAAC,CACFjI,yBAAyB,CAAC2H,YAAY,CAAC,CACzC,CAAC,CAED;AACA,KAAM,CAAAQ,gBAAgB,CAAGA,CAAA,GAAM,KAAAC,sBAAA,CAC7B,GAAI,CAAC5H,QAAQ,CAAE,CACbmB,KAAK,CAAC,sCAAsC,CAAC,CAC7C,OACF,CACA,GAAI,CAAChC,kBAAkB,EAAI,GAAAyI,sBAAA,CAAChH,cAAc,CAACqF,OAAO,UAAA2B,sBAAA,WAAtBA,sBAAA,CAAwBnF,KAAK,EAAE,CACzDtB,KAAK,CAAC,qCAAqC,CAAC,CAC5C,OACF,CAEA,KAAM,CAAA0G,SAAS,CAAGjH,cAAc,CAACqF,OAAO,CAACxD,KAAK,CAE9C,GAAI5C,WAAW,CAACiI,IAAI,CAACvB,KAAK,EAAIA,KAAK,CAAC/E,IAAI,GAAKqG,SAAS,CAAC,CAAE,CACvD,GAAI,CAACrD,MAAM,CAACuD,OAAO,oBAAAhF,MAAA,CAAmB8E,SAAS,4CAAmC,CAAC,CAAE,CACnF,OACF,CACF,CAEA,KAAM,CAAAG,QAAoB,CAAG,CAAExG,IAAI,CAAEqG,SAAS,CAAEd,UAAU,CAAE5H,kBAAmB,CAAC,CAChF,KAAM,CAAA8I,aAAa,CAAGpI,WAAW,CAACqI,MAAM,CAAC3B,KAAK,EAAIA,KAAK,CAAC/E,IAAI,GAAKqG,SAAS,CAAC,CAC3EI,aAAa,CAACE,IAAI,CAACH,QAAQ,CAAC,CAE5BlI,cAAc,CAACmI,aAAa,CAAC,CAC7BtD,YAAY,CAACyD,OAAO,CAAC,uBAAuB,CAAEvD,IAAI,CAACwD,SAAS,CAACJ,aAAa,CAAC,CAAC,CAC5E9G,KAAK,gBAAA4B,MAAA,CAAe8E,SAAS,yBAAsB,CAAC,CACtD,CAAC,CAED,KAAM,CAAAS,cAAc,CAAIC,WAAuB,EAAK,CAClDnJ,qBAAqB,CAACmJ,WAAW,CAACxB,UAAU,CAAC,CAC7CD,8BAA8B,CAACyB,WAAW,CAACxB,UAAU,CAAC,CACtDrH,eAAe,CAAC,KAAK,CAAC,CACtB,GAAIkB,cAAc,CAACqF,OAAO,CAAE,CACxBrF,cAAc,CAACqF,OAAO,CAACxD,KAAK,CAAG8F,WAAW,CAAC/G,IAAI,CACnD,CACAL,KAAK,gBAAA4B,MAAA,CAAewF,WAAW,CAAC/G,IAAI,iBAAc,CAAC,CACrD,CAAC,CAED,KAAM,CAAAgH,gBAAgB,CAAIC,aAAqB,EAAK,CAClD,GAAIjE,MAAM,CAACuD,OAAO,CAAC,2CAA2C,CAAC,CAAE,CAC/D,KAAM,CAAAE,aAAa,CAAGpI,WAAW,CAACqI,MAAM,CAAC,CAACQ,CAAC,CAAEC,KAAK,GAAKA,KAAK,GAAKF,aAAa,CAAC,CAC/E3I,cAAc,CAACmI,aAAa,CAAC,CAC7BtD,YAAY,CAACyD,OAAO,CAAC,uBAAuB,CAAEvD,IAAI,CAACwD,SAAS,CAACJ,aAAa,CAAC,CAAC,CAC9E,CACF,CAAC,CAED,KAAM,CAAAW,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAI7I,iBAAiB,CAACkG,OAAO,GAAK,IAAI,CAAE,CACtC/F,SAAS,CAAC2D,WAAW,CAACgF,UAAU,CAAC9I,iBAAiB,CAACkG,OAAO,CAAC,CAC3DlG,iBAAiB,CAACkG,OAAO,CAAG,IAAI,CAClC,CACAvG,eAAe,CAAC,KAAK,CAAC,CACtByB,KAAK,CAAC,sBAAsB,CAAC,CAC/B,CAAC,CAED,KAAM,CAAA2H,aAAa,CAAG1L,WAAW,CAAE2L,SAAiB,EAAK,CACvD,GAAI,CAAC5J,kBAAkB,CAAE,OACzB,KAAM,CAAAoH,KAAK,CAAGpH,kBAAkB,CAAC6H,MAAM,CAAC,CAAC,CAAC,CAACE,IAAI,CAAC,CAAC,CAAC,CAClD,GAAI6B,SAAS,EAAIxC,KAAK,CAACa,KAAK,CAACH,MAAM,CAAE,CACnCtD,4BAA4B,CAAC,6BAA6B,CAAC,CAC3DiF,cAAc,CAAC,CAAC,CAChB,OACF,CACA,KAAM,CAAAvB,IAAI,CAAGd,KAAK,CAACa,KAAK,CAAC2B,SAAS,CAAC,CACnC,KAAM,CAAAC,eAAe,CAAG3B,IAAI,CAACF,YAAY,CAACK,OAAO,CAAC,UAAU,CAAE,EAAE,CAAC,CACjE7D,4BAA4B,CAACqF,eAAe,CAAC,CAC7CpJ,mBAAmB,CAACqJ,SAAS,EAAIA,SAAS,CAAG,CAAC,CAAC,CACjD,CAAC,CAAE,CAAC9J,kBAAkB,CAAEwE,4BAA4B,CAAC,CAAC,CAEtD,KAAM,CAAAuF,oBAAoB,CAAG9L,WAAW,CAAE2G,QAA6B,EAAK,CAC1E,GAAI,EAAC5E,kBAAkB,SAAlBA,kBAAkB,WAAlBA,kBAAkB,CAAE6H,MAAM,CAAC,CAAC,CAAC,EAAE,OACpC,KAAM,CAAAmC,YAAuC,CAAG,CAC9ClF,GAAG,CAAEF,QAAQ,CAACG,MAAM,CAACC,QAAQ,CAC7BC,GAAG,CAAEL,QAAQ,CAACG,MAAM,CAACG,SACvB,CAAC,CACD/E,kBAAkB,CAAC6J,YAAY,CAAC,CAChC,KAAM,CAAA5C,KAAK,CAAGpH,kBAAkB,CAAC6H,MAAM,CAAC,CAAC,CAAC,CAACE,IAAI,CAAC,CAAC,CAAC,CAClD,GAAIvH,gBAAgB,EAAI4G,KAAK,CAACa,KAAK,CAACH,MAAM,CAAE,CAC1C6B,aAAa,CAACnJ,gBAAgB,CAAC,CAAE;AACjC,OACF,CACA,KAAM,CAAAyJ,QAAQ,CAAG7C,KAAK,CAACa,KAAK,CAACzH,gBAAgB,CAAC,CAE9C,GAAI,CAAA0J,gBAA2C,CAC/C,KAAM,CAAAC,aAAa,CAAGF,QAAQ,CAACG,cAAc,CAE7C,GAAI,MAAO,CAAAD,aAAa,CAACrF,GAAG,GAAK,UAAU,CAAE,CAC3CoF,gBAAgB,CAAG,CAAEpF,GAAG,CAAEqF,aAAa,CAACrF,GAAG,CAAC,CAAC,CAAEG,GAAG,CAAEkF,aAAa,CAAClF,GAAG,CAAC,CAAE,CAAC,CAC3E,CAAC,IAAM,CACLiF,gBAAgB,CAAGC,aAAqD,CAC1E,CAEA,KAAM,CAAA7B,QAAQ,CAAG1C,mBAAmB,CAACoE,YAAY,CAAEE,gBAAgB,CAAC,CACpE,GAAI5B,QAAQ,CAAGpJ,kCAAkC,CAAE,CACjDyK,aAAa,CAACnJ,gBAAgB,CAAC,CACjC,CACF,CAAC,CAAE,CAACR,kBAAkB,CAAEQ,gBAAgB,CAAEmJ,aAAa,CAAE/D,mBAAmB,CAAC,CAAC,CAE9E,KAAM,CAAAyE,mBAAmB,CAAGpM,WAAW,CAAE0F,KAA+B,EAAK,CAC3E3B,KAAK,kCAAA4B,MAAA,CAA4BD,KAAK,CAACF,OAAO,CAAE,CAAC,CACjDgG,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN;AACAzL,SAAS,CAAC,IAAM,CACd,GAAI,CAACsC,YAAY,CAAE,CACf,OACJ,CAEAM,iBAAiB,CAACkG,OAAO,CAAG/F,SAAS,CAAC2D,WAAW,CAAC4F,aAAa,CAC7DP,oBAAoB,CACpBM,mBAAmB,CACnB,CAAEE,kBAAkB,CAAE,IAAI,CAAEC,OAAO,CAAE,KAAK,CAAEC,UAAU,CAAE,CAAE,CAC5D,CAAC,CAED,MAAO,IAAM,CACX,GAAI7J,iBAAiB,CAACkG,OAAO,GAAK,IAAI,CAAE,CACtC/F,SAAS,CAAC2D,WAAW,CAACgF,UAAU,CAAC9I,iBAAiB,CAACkG,OAAO,CAAC,CAC7D,CACF,CAAC,CACH,CAAC,CAAE,CAACxG,YAAY,CAAEyJ,oBAAoB,CAAEM,mBAAmB,CAAC,CAAC,CAE7D,KAAM,CAAAK,eAAe,CAAGA,CAAA,GAAM,CAC5B,GAAI,CAAC1K,kBAAkB,CAAE,CACvBgC,KAAK,CAAC,6BAA6B,CAAC,CACpC,OACF,CACAyH,cAAc,CAAC,CAAC,CAAE;AAClBhJ,mBAAmB,CAAC,CAAC,CAAC,CACtBF,eAAe,CAAC,IAAI,CAAC,CACrByB,KAAK,CAAC,wBAAwB,CAAC,CACjC,CAAC,CAED,KAAM,CAAA2I,oBAAoB,CAAGA,CAAA,GAAM,CAC/B,GAAI,CAACrK,YAAY,CAAE,CACf0B,KAAK,CAAC,6BAA6B,CAAC,CACpC,OACJ,CACA2H,aAAa,CAACnJ,gBAAgB,CAAC,CACnC,CAAC,CAED,GAAI,CAACnB,QAAQ,CAAE,mBAAOb,IAAA,QAAKoM,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,eAAa,CAAK,CAAC,CAEzE;AACA,GAAIrL,QAAQ,GAAK,SAAS,CAAE,CAC1B,mBACEd,KAAA,QAAKkM,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BrM,IAAA,QAAKoM,SAAS,CAAC,cAAc,CAAAC,QAAA,cAC3BnM,KAAA,QAAKkM,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCrM,IAAA,QAAKoM,SAAS,CAAC,eAAe,CAAM,CAAC,cACrCpM,IAAA,QAAKoM,SAAS,CAAC,mBAAmB,CAAM,CAAC,cACzCpM,IAAA,QAAKoM,SAAS,CAAC,oBAAoB,CAAM,CAAC,EACvC,CAAC,CACH,CAAC,cACNpM,IAAA,QAAKoM,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,WAAS,CAAK,CAAC,EAC1C,CAAC,CAEV,CAEA;AACA,GAAIrL,QAAQ,GAAK,OAAO,CAAE,CACxB,mBACEd,KAAA,QAAKkM,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BrM,IAAA,QAAKoM,SAAS,eAAAhH,MAAA,CAAgBlE,SAAS,EAAI,CAAC,CAAG,SAAS,CAAG,EAAE,CAAG,CAAAmL,QAAA,cAC9DnM,KAAA,QAAKkM,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCrM,IAAA,QAAKoM,SAAS,CAAC,eAAe,CAAM,CAAC,cACrCpM,IAAA,QAAKoM,SAAS,CAAC,mBAAmB,CAAM,CAAC,cACzCpM,IAAA,QAAKoM,SAAS,CAAC,oBAAoB,CAAM,CAAC,EACvC,CAAC,CACH,CAAC,cACNpM,IAAA,QAAKoM,SAAS,gBAAAhH,MAAA,CAAiBlE,SAAS,EAAI,CAAC,CAAG,SAAS,CAAG,EAAE,CAAG,CAAAmL,QAAA,CAAC,WAElE,CAAK,CAAC,CACLjL,mBAAmB,eAClBlB,KAAA,QAAKkM,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BrM,IAAA,OAAAqM,QAAA,CAAI,yCAA8B,CAAI,CAAC,cACvCrM,IAAA,MAAAqM,QAAA,CAAG,4EAA8D,CAAG,CAAC,cACrErM,IAAA,WAAQoM,SAAS,CAAC,aAAa,CAACE,OAAO,CAAErG,eAAgB,CAAAoG,QAAA,CAAC,4BAE1D,CAAQ,CAAC,EACN,CACN,EACE,CAAC,CAEV,CAEA;AACA,mBACEnM,KAAA,QAAKkM,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BnM,KAAA,QAAKkM,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtBrM,IAAA,QAAKoM,SAAS,CAAC,QAAQ,CAAAC,QAAA,cACrBnM,KAAA,QAAKkM,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BnM,KAAA,QAAKkM,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BrM,IAAA,QAAKoM,SAAS,CAAC,eAAe,CAAM,CAAC,cACrCpM,IAAA,QAAKoM,SAAS,CAAC,mBAAmB,CAAM,CAAC,cACzCpM,IAAA,QAAKoM,SAAS,CAAC,oBAAoB,CAAM,CAAC,EACvC,CAAC,cACNpM,IAAA,OAAIoM,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,WAAS,CAAI,CAAC,EACrC,CAAC,CACH,CAAC,CAEL,CAAChK,QAAQ,eACRrC,IAAA,QAAKoM,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7BrM,IAAA,MAAAqM,QAAA,CAAG,oBAAkB,CAAG,CAAC,CACtB,CACN,cAEDnM,KAAA,QAAKkM,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCrM,IAAA,OAAAqM,QAAA,CAAI,mCAAoB,CAAI,CAAC,cAC7BrM,IAAA,QAAKoM,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAC9B5J,oBAAoB,cACnBvC,KAAA,QAAKkM,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BrM,IAAA,SAAMoM,SAAS,CAAC,4BAA4B,CAAO,CAAC,cACpDlM,KAAA,SAAAmM,QAAA,EAAM,aAAW,CAAC1J,eAAe,SAAfA,eAAe,iBAAfA,eAAe,CAAEkB,IAAI,EAAO,CAAC,cAC/C7D,IAAA,WACEoM,SAAS,CAAC,uBAAuB,CACjCE,OAAO,CAAEjH,mBAAoB,CAAAgH,QAAA,CAC9B,aAED,CAAQ,CAAC,EACN,CAAC,cAENnM,KAAA,QAAKkM,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClCrM,IAAA,SAAMoM,SAAS,CAAC,+BAA+B,CAAO,CAAC,cACvDpM,IAAA,SAAAqM,QAAA,CAAM,cAAY,CAAM,CAAC,cACzBrM,IAAA,WACEoM,SAAS,CAAC,oBAAoB,CAC9BE,OAAO,CAAEhJ,cAAe,CACxBiJ,QAAQ,CAAExJ,qBAAsB,CAAAsJ,QAAA,CAE/BtJ,qBAAqB,CAAG,eAAe,CAAG,gBAAgB,CACrD,CAAC,EACN,CACN,CACE,CAAC,CACL,CAACM,oBAAoB,CAAC,CAAC,eACtBrD,IAAA,QAAKoM,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,8EAEnC,CAAK,CACN,EACE,CAAC,cAENnM,KAAA,QAAKkM,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCrM,IAAA,OAAAqM,QAAA,CAAI,+BAAuB,CAAI,CAAC,cAChCrM,IAAA,QAAKoM,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1BrM,IAAA,CAACH,YAAY,EAAAwM,QAAA,cACXrM,IAAA,UACEwM,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,SAAS,CACrBC,GAAG,CAAEzJ,cAAe,CACpBsJ,QAAQ,CAAE,CAAClK,QAAS,CACrB,CAAC,CACU,CAAC,CACZ,CAAC,cACNnC,KAAA,QAAKkM,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BrM,IAAA,WACEoM,SAAS,CAAC,QAAQ,CAClBE,OAAO,CAAElE,cAAe,CACxBmE,QAAQ,CAAE,CAAClK,QAAS,CAAAgK,QAAA,CACrB,YAED,CAAQ,CAAC,cACTrM,IAAA,WACEoM,SAAS,CAAC,QAAQ,CAClBE,OAAO,CAAEtC,gBAAiB,CAC1BuC,QAAQ,CAAE,CAAClK,QAAS,CAAAgK,QAAA,CACrB,mBAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cAENnM,KAAA,QAAKkM,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClCrM,IAAA,OAAAqM,QAAA,CAAI,6BAAqB,CAAI,CAAC,cAC9BnM,KAAA,QAAKkM,SAAS,CAAC,cAAc,CAAAC,QAAA,EAC1B,CAACvK,YAAY,cACV9B,IAAA,WAAQsM,OAAO,CAAEJ,eAAgB,CAACE,SAAS,CAAC,sBAAsB,CAACG,QAAQ,CAAE,CAAC/K,kBAAmB,CAAA6K,QAAA,CAAC,yBAElG,CAAQ,CAAC,cAETrM,IAAA,WAAQsM,OAAO,CAAErB,cAAe,CAACmB,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAC,uBAEjE,CAAQ,CACX,cACDrM,IAAA,WAAQsM,OAAO,CAAEH,oBAAqB,CAACC,SAAS,CAAC,QAAQ,CAACG,QAAQ,CAAE,CAACzK,YAAa,CAAAuK,QAAA,CAAC,oCAEnF,CAAQ,CAAC,EACN,CAAC,CACLvK,YAAY,eACT5B,KAAA,MAAGkM,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,gDAAqC,CAACrK,gBAAgB,CAAG,CAAC,EAAI,CAC3F,EACE,CAAC,cAEN9B,KAAA,QAAKkM,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCrM,IAAA,OAAAqM,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBrM,IAAA,OAAIoM,SAAS,CAAC,YAAY,CAAAC,QAAA,CACvBnK,WAAW,CAACoH,MAAM,CAAG,CAAC,CACrBpH,WAAW,CAACZ,GAAG,CAAC,CAACsH,KAAK,CAAEoC,KAAK,gBAC3B9K,KAAA,OAAgBkM,SAAS,CAAC,YAAY,CAAAC,QAAA,eACpCrM,IAAA,SAAAqM,QAAA,CAAOzD,KAAK,CAAC/E,IAAI,CAAO,CAAC,cACzB3D,KAAA,QAAKkM,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCrM,IAAA,WAAQsM,OAAO,CAAEA,CAAA,GAAM3B,cAAc,CAAC/B,KAAK,CAAE,CAAAyD,QAAA,CAAC,UAAQ,CAAQ,CAAC,cAC/DrM,IAAA,WAAQsM,OAAO,CAAEA,CAAA,GAAMzB,gBAAgB,CAACG,KAAK,CAAE,CAACoB,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,GAAC,CAAQ,CAAC,EAC9E,CAAC,GALCrB,KAML,CACL,CAAC,cAEFhL,IAAA,MAAAqM,QAAA,CAAG,qBAAmB,CAAG,CAC1B,CACC,CAAC,EACF,CAAC,cAENnM,KAAA,QAAKkM,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACnCrM,IAAA,OAAAqM,QAAA,CAAI,kBAAU,CAAI,CAAC,cACnBrM,IAAA,OAAIoM,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAC5BzK,sBAAsB,CAACN,GAAG,CAAC,CAACqL,IAAI,CAAE3B,KAAK,gBACpChL,IAAA,OAAgBoM,SAAS,CAAEpB,KAAK,GAAKhJ,gBAAgB,CAAE,CAAC,CAAG,qBAAqB,CAAG,EAAG,CAAAqK,QAAA,CACjFM,IAAI,EADA3B,KAEL,CACP,CAAC,CACF,CAAC,EACJ,CAAC,EACH,CAAC,cAENhL,IAAA,QAAKoM,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC3BhK,QAAQ,cACPnC,KAAA,CAACR,SAAS,EACRkN,iBAAiB,CAAErM,cAAe,CAClCsM,MAAM,CAAEnL,eAAe,EAAI,CAAE4E,GAAG,CAAE,CAAC,QAAQ,CAAEG,GAAG,CAAE,CAAC,SAAU,CAAE,CAC/DqG,IAAI,CAAE,EAAG,CACTC,MAAM,CAAExL,MAAO,CACfyL,OAAO,CAAE,CACPC,cAAc,CAAE,KAAK,CACrBC,iBAAiB,CAAE,KAAK,CACxBC,iBAAiB,CAAE,KACrB,CAAE,CAAAd,QAAA,EAED7K,kBAAkB,eAAIxB,IAAA,CAACF,kBAAkB,EAACsJ,UAAU,CAAE5H,kBAAmB,CAAE,CAAC,CAC5EE,eAAe,eAAI1B,IAAA,CAACJ,MAAM,EAACwG,QAAQ,CAAE1E,eAAgB,CAAE,CAAC,EAChD,CAAC,cAEZxB,KAAA,QAAKkM,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtCrM,IAAA,OAAAqM,QAAA,CAAI,sCAAiC,CAAI,CAAC,cAC1CrM,IAAA,MAAAqM,QAAA,CAAG,qFAA6E,CAAG,CAAC,EACjF,CACN,CACE,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAzL,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}